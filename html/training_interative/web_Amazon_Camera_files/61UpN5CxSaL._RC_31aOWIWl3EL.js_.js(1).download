(function(u){var r=window.AmazonUIPageJS||window.P,ea=r._namespace||r.attributeErrors,f=ea?ea("DetailPageImageBlockAssets",""):r;f.guardFatal?f.guardFatal(u)(f,window):f.execute(function(){u(f,window)})})(function(u,r,ea){u.register("postMetric",function(){return{postCountMetric:function(f){if("undefined"!==typeof f){var a=r.ue;if(a){var b=a.count(f)||0;a.count(f,b+1)}}},postTimeMetric:function(f,a){if("undefined"!==typeof f&&"undefined"!==typeof a){var b=r.ue;b&&b.count(f,a)}},emitNexusMetric:function(f){r.ue&&
ue.event&&ue.event(f,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(f,a,b,k,m,c,p,d){return{eventSource:"IBCarousel",placementContext:d,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:f,intPayload:a,videoAsin:b,videoAsinList:"",groupType:k,pageUrl:m,pageAsin:c,weblabIds:p}}}});"use strict";u.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});u.register("postEarlyMetric",function(){return null});"use strict";
u.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(f,a,b,k){f=f.extend(!0,{},b,k);var m=new a(f);u.register("ImageBlockAPI",function(){return m.api});return m});"use strict";u.when("A","jQuery").execute(function(f,a){f.on("a:image:load:landingImage",function(){r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});f.loadDynamicImage(a("#landingImage"))});"use strict";u.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(f){function a(b){b&&(u.load.js(b),r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",r.parseInt(performance.now())))}function b(b){b&&u.load.css(b)}var k=f.airyConfig;k===ea?u.when("ImageBlockBTF").execute(function(f){k=f.airyConfig;a(k.jsUrl);b(k.cssUrl)}):(a(k.jsUrl),b(k.cssUrl))});"use strict";u.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(f,
a,b,k,m){var c={};return function(p){var d=this;d.dispatch=function(b,a){var d=c[b];k.isDefined(d)&&f.each(d,function(b,c){c.call(r,a)})};d.register=function(b,a){k.isDefined(c[b])||(c[b]=[]);"function"===typeof a&&c[b].push(a)};d.model=new a(p,d);d.view=new b(p,d,d.model);d.api=new m(p,d,d.model);d.init=function(){d.model.init();d.view.init()};d.init()}});"use strict";u.when("A","imageBlockUtils").register("ImageBlockModel",function(f,a){function b(b,c,d,f,k,p){a.isDefined(b)&&(n.type=b);a.isDefined(c)&&
(n.index=c);a.isDefined(d)&&(n.thumbnailIndex=d);a.isDefined(f)&&(n.variant=f);a.isDefined(k)&&(n.color=k);n.shoppableScene=p||null}function k(a){b("image",0,0,"MAIN",a||d.landingAsinColor||d.defaultColor,null)}function m(a){a=a.data;Q=f.copy(n);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function c(b){m(b);b=f.copy(b);b.data=f.copy(n);q.dispatch("updateView",b)}function p(){Q=f.copy(n);k(n.color)}var d,q,n={},Q={},F,r;return function(b,a){q=a;d=b;q.register("updateSelection",
c);q.register("updateModel",m);q.register("resetModel",p);this.init=function(){k()};this.getCurrentItem=function(){return f.copy(n)};this.getPreviousItem=function(){return f.copy(Q)};this.setCurrentEvent=function(b){F=b};this.getCurrentEvent=function(){return F};this.setImmersiveViewModalInstance=function(b){r=b};this.getImmersiveViewModalInstance=function(){return r};this.updateTitle=function(b){d.title=b}}});"use strict";u.when("ImageBlockBTF","postMetric").register("ImageBlockInitViews",function(f,
a){function b(b,a,k,d,q){function n(b){"click"===b.type&&d.postCountMetric("thumbClick");"click"===b.type&&l.overrideAltImageClickAction?x.dispatch("thumbActionClick",b):x.dispatch("updateSelection",b)}function Q(b){l.useClickZoom||x.dispatch("imageClick",b)}function F(b){l.useClickZoom||x.dispatch("imageHover",b)}function H(b){x.dispatch("button360Click",b)}function w(a){!k.isDefined(a)||"swatchClick"!==a.type&&"updatedData"!==a.type?(v.update(a),"swatchHover"!==a.type&&z.getPreviousItem().thumbnailIndex!==
a.data.thumbnailIndex&&d.postCountMetric(a.data.type+"ThumbnailSelected"),b.trigger("image-block-thumbnail-selected",a.data)):(v.render(a.data.color,!1,a.onload),a={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof r.markFeatureRender&&r.markFeatureRender("imageblock",a))}function C(b){x.dispatch("resize",b)}function M(b){k.selectThumbnail(b,A)}function N(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,
components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function L(){"function"===typeof r.markFeatureInteractive&&r.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===f.useIV?u.when("a-modal").execute(function(){N()}):N();l.disableHoverOnAltImages||b.declarative("thumb-action",["mouseenter","mouseleave"],n);b.declarative("thumb-action",["click"],
n);b.declarative("main-image-click",["click"],Q);b.declarative("main-image-click",["mouseenter","mouseleave"],F);b.declarative("button-360-click",["click"],H);b.on("resize",C)}function P(b){var a=b.data,c;a&&"ingress"!==a.type&&"click"===b.type&&(c=b);return c}function h(b){var a=z.getCurrentItem(),c={type:"click"};c.$declarativeParent=b;c.data=a;return c}var v,l,x,z,A;return function(b,d,f){v=this;l=b;x=d;z=f;A=a("#imageBlock #altImages ul");var k=a("#imageBlock .canvas"),g=a("#main-image-container"),
e;v.subViews=[];for(d=0;d<q.length;d++)v.subViews.push(new q[d](b,f,v,x));v.render=function(b,d,f){var l=0;A.find(".item").remove();b=b||z.getCurrentItem().color;a.each(v.subViews,function(a,e){l=e.render(b,l,k,A,g,d,f)||l});var p=A.find(".a-button-selected").closest(".a-declarative");e=h(p)};v.init=function(){A=a("#imageBlock #altImages ul");var b=A.find(".a-button-selected").closest(".a-declarative"),g=b.data("action"),b=b.data(g)||{};b.color=l.landingAsinColor||l.defaultColor;x.dispatch("updateModel",
{data:b});v.render(b.color,!0);l.isDebug&&r.console&&console.log(l);x.register("updateView",w);x.register("selectThumbnail",M);L()};v.update=function(b){a.each(v.subViews,function(g,a){a.update(b)});l.usePeekHover&&("mouseleave"===b.type?x.dispatch("updateSelection",e):"click"===b.type&&(e=P(b)||e))}}}var k=["A","jQuery","imageBlockUtils","postMetric"].concat(f.views);u.when.apply(u,k).register("ImageBlockView",function(){for(var a=arguments[0],c=arguments[1],f=arguments[2],d=arguments[3],k=[],n=
4,r=arguments.length;n<r;n++)k.push(arguments[n]);return b(a,c,f,d,k)})});"use strict";u.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(f,a,b,k,m,c,p){function d(c,g,e,d){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var h=x.getCurrentItem();if(!d||"chromeless-video"!==h.type||!l.autoplayVideo){d=0;"image"===h.type&&(d=Math.max(F(h.color,h.variant),0));var f=g+d;f>=e&&(d=0,f=g);
g=b.getImageHash(h.color,d,l);-1!==g&&(z.dispatch("updateModel",{data:{index:d,thumbnailIndex:f,variant:g.variant,type:"image",shoppableScene:g.shoppableScene}}),g=c.find(".item").get(f),b.selectGivenThumbnail(a(g),c))}}}function q(h,g,e){g=l.colorImages&&l.colorImages[g];var f=h;b.isDefined(g)&&(a.each(g,function(g,a){h<l.maxAlts&&(b.createThumbnail({type:"image",index:g,thumbnailIndex:h,variant:a.variant,shoppableScene:a.shoppableScene},a.thumb,A,"imageThumbnail"),h++)}),c.isEnabled&&p.logAltImgRequestPlacedOnThumbnails(a,
c,x),d(A,f,h,e));return h}function n(c,g){if("image"===c.type){var e=a("#image-canvas-caption #canvasCaption"),h,d=l.staticStrings,f=l.colorImages,k=c.color,p=c.index;b.isShoppableScenesEnabled()&&c.shoppableScene?h=d.clickSceneTagsToShopProducts:g&&l.useIV?h=d.clickToExpand:f[k]&&f[k][p].hiRes&&l.useHoverZoom?(h=l.useHoverZoomIpad?d.touchToZoom:l.useClickZoom?d.clickToZoom:d.rollOverToZoom,l.hoverZoomIndicator&&(h="\x3cimg src\x3d'"+l.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+h)):l.useIV&&(h=
d.clickToExpand);e.html(h)}}function Q(){J.find("li").removeClass("selected");a("#image-canvas-caption #canvasCaption").empty();b.hideUnavailable()}function F(a,g){return b.getIndexForVariant(a,g,l)}function H(c,g){var e="a-dynamic-image";if(!l.acEnabled){var h;a.each(c.main,function(a,g){b.isDefined(h)||(h=parseFloat(g[1]/g[0])<=parseFloat(l.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});e+=h}var d=b.getMaxDimensionsOfMainImage(c.main,I,l),f=d[0],k=d[1],d=a("\x3cdiv\x3e\x3c/div\x3e"),
f={"max-height":f,"max-width":k};d.addClass(e).css(f).attr({"data-old-hires":c.hiRes,"data-a-manual-replacement":"true",onload:g}).data("a-dynamic-image",c.main);return d}function w(b,g,a){var c="desktop-dp-atf-ib-shoppablescenes-tags-"+b;"function"==typeof uet&&uet("bb",c,{wb:1});a.attr("data-a-image-name","shoppable-scene:"+b);a=J.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");a.addClass("celwidget").attr("cel_widget_id",
c);a.children("span").css("display","inline-block");z.dispatch("initialize-shoppable-scene",{index:b,shoppableScene:g.shoppableScene,imageSource:g.hiRes||g.large||g.lowRes,$tagPlaceholder:a.find(".mirai-scene-tag-placeholder"),$viewProductsButton:a.find(".mirai-scene-view-products-button")});"MutationObserver"in r&&(new MutationObserver(function(a,e){a.forEach(function(a){"childList"===a.type&&a.target.classList.contains("mirai-scene-image-block-tag-container")&&1===a.addedNodes.length&&"IMG"===a.addedNodes[0].tagName&&
""!==a.addedNodes[0].src&&(a=a.addedNodes[0],"function"!==typeof a.onload&&(a.onload=function(){f.trigger("shoppable-scene-image-loaded",{index:b,shoppableScene:g.shoppableScene})}),e.disconnect())})})).observe(a.find(".mirai-scene-image-block-tag-container")[0],{subtree:!0,childList:!0,attributes:!1});"function"==typeof uet&&uet("cf",c,{wb:1});return a}function C(b){var a=I.css("height");null!==a&&b.find(".imgTagWrapper").css("height",a);b.addClass("selected");l.imgTagWrapperClasses&&b.find(".imgTagWrapper").addClass(l.imgTagWrapperClasses)}
function M(a,g){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){b.isDefined(g)&&m.postCountMetric("mainImageUpdateOnTwisterVariationClick");var e=b.getImageHash(a.color,a.index,l);if(-1===e)return e={data:{index:0,thumbnailIndex:0,variant:"",type:"unavailable"}},L(a)||(z.dispatch("updateModel",e),b.showUnavailable(a.color)),-1;var h=J.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(h)){var h=a.thumbnailIndex,d=H(e,g),k;k=b.isShoppableScenesEnabled()&&e.shoppableScene?
w(h,e,d):J.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");k.addClass("image item itemNo"+h+" maintain-height");k.find(".placeHolder").replaceWith(d);J.find(".list").append(k);f.loadImageManually(d);h=k}C(h);z.dispatch("loadMagnifier");n(a);l.useIV&&b.isDefined(e.hiRes)&&h.css("cursor","pointer");a.isUserGenerated&&(h=x.getPreviousItem(),d=a.variant,b.isDefined(d)&&h.thumbnailIndex!==a.thumbnailIndex&&(c.isEnabled&&p.logAltImgRequestServed(c),m.postCountMetric("ImageThumbnailSelectedVariant:"+
d),0===d.indexOf("IG")&&(m.postCountMetric("IGImageSelectedVariant:"+d),m.postCountMetric("IGImageSelectedEvent:"+a.interaction))));f.trigger("dp:image-block:update",e)}}function N(){a("#imageBlock").css("opacity","1");J.css("opacity","1");b.spinner(J,!1)}function L(a){return b.lazyLoadingRequired(a,x,l)}function P(){var c=J.find(".item .imgTagWrapper"),g=b.getContainerHeight(I,l.holderRatio,l.holderMaxHeight);0<g&&(I.height(g),c.height(g));J.find("img.a-dynamic-image").each(function(){var g=a(this);
g.data("a-manual-replacement")&&f.loadDynamicImage(this);var c=g.data("a-dynamic-image"),c=b.getMaxDimensionsOfMainImage(c,I,l);g.css({"max-height":c[0]+"px","max-width":c[1]+"px"})})}function h(a){n(x.getCurrentItem(),"mouseenter"===a.type)}var v,l,x,z,A,J,I,D;f.on("triggerImageAjax",function(a){var g=x.getCurrentItem().color;l.colorImages[g]||(l.colorImages[g]=a);a={type:"updatedData",data:x.getCurrentItem()};z.dispatch("updateView",a);(g=l.colorToAsin[g])&&g.asin&&u.register(b.rankedImagesReadyEvent(g.asin))});
return function(a,g,e,c){v=this;l=a;x=g;z=c;l.colorImages[l.landingAsinColor]=l.colorImages[l.defaultColor];v.render=function(a,b,g,e,c,h,d){J=g;A=e;I=c;D=q(b,a,h);h||(a=x.getCurrentItem(),L(a)&&z.dispatch("updateModel",{data:{type:"lazy-loaded"}}));a=x.getCurrentItem();h=!h;L(a)||(N(),Q(),h&&J.find(".list .item").remove());M(x.getCurrentItem(),d);return D};v.update=function(a){var g=a.data;x.setCurrentEvent(a);"ingress"===g.type||L(a.data)||(N(),Q());if("swatchHover"===a.type)if(g.color===x.getCurrentItem().color)M(x.getCurrentItem());
else{if(!a.captured){var e;e=Math.max(F(g.color,x.getCurrentItem().variant),0);e=b.getImageHash(g.color,e,l);if(-1===e)L(g)||b.showUnavailable(g.color),e=-1;else{var g=J.find(".swatchHoverExp"),c=H(e);g.find(".imgTagWrapper").html(c);f.loadImageManually(c);m.postCountMetric("mainImageUpdateOnTwisterVariationHover");C(g);f.trigger("dp:image-block:update",e);e=void 0}-1!==e&&(a.captured=!0)}}else"image"===g.type&&(g.interaction=a.type,g.isUserGenerated=!0,"mouseenter"===a.type&&m.postCountMetric("dpcc_imageThumbHovered_"+
(g.thumbnailIndex+1)+"_"+D),M(g),l.usePeekHover&&"click"!==a.type||(b.selectGivenThumbnail(a.$declarativeParent,A),"click"===a.type&&(m.postCountMetric("dpcc_imageThumbClicked_total"),m.postCountMetric("dpcc_imageThumbClicked_"+(g.thumbnailIndex+1)+"_"+D))))};l.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");z.register("imageHover",h);z.register("resize",P)}});"use strict";u.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(f,a,b,k,m,c){function p(a){N?a.css("cursor","url('"+F.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function d(a){var c=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(c))for(var c=c[1].split("_"),h=0;h<c.length;h++){var d=c[h].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(d)&&(a[d[1]]=parseInt(d[2],10))}return a}function q(n,q){function h(){var a;q.useClickZoom?(a=q.offsetInClickZoom,a=[Math.min(1,
Math.max(0,E[0]-(B[0]+a))/(B[2]-2*a)),Math.min(1,Math.max(0,E[1]-(B[1]+a))/(B[3]-2*a))]):a=e&&e.updatePosition();if(a&&g&&g.detailSize){var b=[g.detailSize[0]-g.rect.width,g.detailSize[1]-g.rect.height];f.capabilities.rtl?g.detailImage.get(0).style.right=-(a[0]*b[0])+"px":g.detailImage.get(0).style.left=-(a[0]*b[0])+"px";g.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function v(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function l(b){var g=T?b.originalEvent.touches[0]||b.originalEvent.changedTouches[0]:
"";E=T?[g.pageX,g.pageY]:[b.pageX,b.pageY];if(f.capabilities.rtl){var e=a(r).width();E=T?[e-g.pageX,g.pageY]:[e-b.pageX,b.pageY]}}function x(a){T&&a.preventDefault();l(a);q.useClickZoom?a=[B[0],B[1],B[0]+B[2],B[1]+B[3]]:(a=e?e.offset:n.offsetParent().offset(),a=F.acEnabled?[a.left,a.top,C.width()+a.left,C.height()+a.top]:[G[0]+a.left,G[1]+a.top,G[0]+G[2]+a.left,G[1]+G[3]+a.top]);E[0]<a[0]||E[1]<a[1]||E[0]>=a[2]||E[1]>=a[3]||F.acEnabled&&!v(n)?(q.fadeMagnifier?Y||(Y=!0,ca=setTimeout(function(){z(!0)},
500)):q.useClickZoom||z(),y&&(y=!1,clearTimeout(ba))):(y||(y=!0,ba=setTimeout(function(){k.postCountMetric("dppc_hoverZoomOpened");m.isEnabled&&c.logHoverZoomRequestServed(m)},1E3)),q.fadeMagnifier&&Y&&(Y=!1,clearTimeout(ca)),h())}function z(b){b&&w.suppressMagnifier(!0);if(H&&(g&&g.hide(),e&&(e.destroy(),e=null),H=!1,T?(n.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
Q(),b))n.one("click.magnifier touchstart.magnifier",function(a){A(a,!0)})}function A(b,c){c&&w.suppressMagnifier(!1);if(!H&&!V&&(0===U&&(k.postCountMetric("dppc_hoverTime",new Date-(r.ue&&r.ue.t0||0)),U=1),ia[X]||(k.postCountMetric("dppc_hoverMain"),ia[X]=1),G=[n.position().left,n.position().top,n.width(),n.height()],X&&(l(b),g?g.refit().show():g=new oa,q.useClickZoom||(e=e||new da),B=g.getWindowSize(),h()),H=!0,T?(n.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",x).bind("touchend.magnifier",
z),a(document).trigger("engaged.magnifier")):(F.acEnabled?C.unbind("mousemove.magnifier"):n.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",x)),c)){var d=a("#zoomWindow");if(0<d.length)d.one("click.magnifier touchend.magnifier",function(a){z(!0)})}}function Q(){q.useHoverZoom&&(T?n.bind("touchstart.magnifier touchmove.magnifier",A):F.acEnabled?v(n)&&C.bind("mousemove.magnifier",A):n.bind("mousemove.magnifier",A))}var w=this,C=n.offsetParent(),u={detailImageUrl:n.attr("data-old-hires"),
location:"over",locationElement:n,prelaod:"ready",zIndex:50,offsetInClickZoom:50};q=a.extend(u,q);q.adjustment=[10,0,-10,0];var g=null,e=null,E=null,G=null,B=null,K={"null":1,"":1,undefined:1},H=!1,V=!1,X=q.detailImageUrl,T=q.useHoverZoomIpad||0,U=0,ia={},da=function(){function b(a){var e=Math.round(Math.min(n.width(),g.rect.width/a));a=Math.round(Math.min(n.height(),g.rect.height/a));f.css({width:e,height:a});c=[e,a]}var e=this,c=[0,0],h=(g.detailSize&&g.detailSize[0]||5E8)/G[2],d=(g.detailSize&&
g.detailSize[1]||5E8)/G[3],h=d>h?d:h;a("#magnifierLens").remove();var f=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});q.generalImageUrls.zoomLensBackground&&f.css({backgroundImage:"url("+q.generalImageUrls.zoomLensBackground+")"});F.showMagnifierOnHover?p(f):f.css("cursor","pointer");e.updatePosition=function(){var a=[G[2]-c[0],G[3]-c[1]],b=0>=a[0]?.5:Math.max(0,Math.min(1,(E[0]-c[0]/2-G[0]-e.offset.left)/a[0])),g=0>=a[1]?.5:Math.max(0,Math.min(1,(E[1]-c[1]/2-G[1]-e.offset.top)/
a[1])),h=G[0]+Math.round(b*a[0]),a=G[1]+Math.round(g*a[1]);f.get(0).style.left=h+"px";f.get(0).style.top=a+"px";return[b,g]};e.destroy=function(){f.remove()};e.offset=n.offsetParent().offset();b(h);e.updatePosition();f.appendTo(n.parent());g.detailImage[0].complete||g.detailImage.load(function(){var a=g.detailImage.width()/G[2];b(a);e.updatePosition()})};da.preload=function(){w.preload(q.generalImageUrls.lensBackgroundUrl)};var oa=function(){function g(){var e={};if("over"===q.location){var e=q.useClickZoom,
h={},d=a("#leftCol"),k=a("#centerCol"),p=a("#rightCol"),v=a("#hover-zoom-end"),m=a("#actionPanelContainer"),E=b.isjQueryObjDefined(d)?d.outerHeight():k.outerHeight();h.top=b.isjQueryObjDefined(d)?d.offset().top:k.offset().top;h.bottom=E+h.top;h.right=b.isjQueryObjDefined(p)?p.offset().left:m.offset().left;h.left=e?0:d.offset().left+d.outerWidth();b.isjQueryObjDefined(v)&&v.offset().top>h.bottom&&(h.bottom=v.offset().top);e=h}else"right"===q.location&&(e=n.offset(),e={left:e.left+n.outerWidth(),top:e.top,
right:e.left+n.outerWidth()+400,bottom:e.top+400});q.minHeightElement&&(e.bottom=Math.max(e.bottom,e.top+a(q.minHeightElement).outerHeight()));e.bottom=Math.min(e.bottom,a(r).scrollTop()+a(r).height());e.left+=f[0];e.top+=f[1];e.right+=f[2];e.bottom+=f[3];e.width=e.right-e.left;e.height=e.bottom-e.top;q.enhancedHoverOverlay&&b.isDefined(r.pageXOffset)&&(h=a(r).width(),e.width=h-e.left+r.pageXOffset-18,e.height-=14);l.css({left:e.left,top:e.top,width:e.width,height:e.height});c.rect=e;return c}function e(a){var b=
new Image;c.detailSize=[0,0];b.onload=function(){c.detailSize=[b.width,b.height];h()};b.src=a.attr("src");if(0<b.width&&0<b.height)c.detailSize=[b.width,b.height];else if(q.detailImageSize)c.detailSize=q.detailImageSize;else{a=d(b.src);var g=G[2]/G[3];a.SS||a.AA?(a=a.SS||a.AA,c.detailSize=[a,a]):a.SX?c.detailSize=[a.SX,Math.round(a.SX/g)]:a.SY?c.detailSize=[Math.round(a.SY*g),a.SY]:a.SL&&(c.detailSize=1<=g?[a.SL,Math.round(a.SL/g)]:[Math.round(a.SL*g),a.SL])}}var c=this,f=q.adjustment;a("#zoomWindow").remove();
var k={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:q.zIndex};q.enhancedHoverOverlay&&(k.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",k.border="1px solid #949494",k.borderColor="rgb(148,148,148)");var l=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(k);q.fadeMagnifier&&l.fadeIn(200);q.useClickZoom&&(N?l.css("cursor",'url("'+q.zoomOutIcon+'"), auto'):(l.css("cursor","-webkit-zoom-out"),l.css("cursor","-moz-zoom-out"),l.css("cursor","zoom-out")));c.updateImage=function(b){b=a("\x3cimg id\x3d'detailImg' src\x3d'"+
b+"'/\x3e").css("position","absolute");c.detailImage&&c.detailImage.remove();l.append(b);a(document).trigger("updated.magnifier");c.detailImage=b;e(c.detailImage)};c.refit=function(){g();e(c.detailImage);return c};q.fadeMagnifier?(c.show=function(){l.fadeIn(200);return c},c.hide=function(){l.fadeOut(200);return c}):(c.show=function(){l.show();return c},c.hide=function(){l.hide();return c});c.destroy=function(){l.remove();return c};c.getWindowSize=function(){return[c.rect.left,c.rect.top,c.rect.width,
c.rect.height]};c.updateImage(X);g();l.appendTo(document.body)},Y=!1,ca,y=!1,ba;w.preload=function(b){b=a.makeArray(b);for(var e=b.length,g=0;g<e;g++)b[g]instanceof Array?w.preload(b[g]):"string"===typeof b[g]&&b[g]&&!K[b[g]]&&(K[b[g]]=new Image,K[b[g]].src=b[g])};w.changeImage=function(b,e){H&&z();X=e;n.attr("src",b);w.preload(b);G=[n.position().left,n.position().top,n.width(),n.height()];e&&("immediately"===q.preload?w.preload(e,!0):a(r).ready(function(){w.preload(e)}),g?g.updateImage(e):n.attr("data-old-hires",
e))};w.destroy=function(){F.acEnabled?C.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):n.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");e&&e.destroy();e=null;g&&g.destroy();g=null};w.detailImage=function(){return g.detailImage};w.suppressMagnifier=function(a){V=a};w.isEngaged=function(){return H};w.engageMagnifier=A;w.disengageMagnifier=z;n[0].complete?Q():n.one("load",Q);w.preload(n.attr("src"));
r.performance&&performance.now&&r.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(q.preload){var M=q.detailImageUrl,u=function(){w.preload(M,!0);q.useClickZoom||da.preload()},W=q.preload;W.constructor!==Array&&(W=[W]);for(var t=0;t<W.length;t++)if("immediately"===W[t])u();else if(a(r)[W[t]])a(r)[W[t]](u);else a(r).bind(W[t],u)}return w}function n(){if(F.useHoverZoom){var d={adjustment:[0,0,1,1],generalImageUrls:F.staticImages,location:"over",minHeightElement:"#imageBlock",preload:"ready",
zIndex:199,useHoverZoomIpad:F.useHoverZoomIpad,useHoverZoom:F.useHoverZoom,useClickZoom:F.useClickZoom,fadeMagnifier:F.fadeMagnifier,zoomOutIcon:F.staticImages.zoomOutCur,enhancedHoverOverlay:F.enhancedHoverOverlay||F.atfEnhancedHoverOverlay};C&&(C.destroy(),C=ea);var f=u.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(f)?F.useClickZoom?(f.one("click.loadmagnifier touchstart.loadmagnifier",function(a){C=new q(f,d);C.engageMagnifier(a,
!0)}),N?f.css("cursor",'url("'+F.staticImages.zoomInCur+'"), auto'):(f.css("cursor","-webkit-zoom-in"),f.css("cursor","-moz-zoom-in"),f.css("cursor","zoom-in"))):C=new q(f,d):m.isEnabled&&c.logHoverZoomApplicability(a,m)}}var Q,F,H,w,C,u,N=navigator.userAgent.match(/msie|trident/i);return function(a,b,c,d){Q=this;F=a;H=b;m.refToModel=H;w=d;Q.render=function(a,b,c,h,d,f){u=c;C&&(C.destroy(),C=ea)};Q.update=function(a){};w.register("loadMagnifier",n);w.register("resize",n)}});"use strict";u.when("A",
"jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(f,a,b,k){function m(a,c,f){a=(a=f?f:b.getColorFromState(c.getState().hovered_variations,d))&&""!==a?a:d.defaultColor;n.dispatch("updateView",{type:"swatchHover",data:{color:a}});k.postCountMetric("swatchHover")}function c(a,c,f,p){a=(a=p?p:b.getColorFromState(c.getState().selected_variations,d))&&""!==a?a:d.defaultColor;a===q.getCurrentItem().color?"function"===typeof f&&f():(n.dispatch("updateSelection",{type:"swatchClick",
data:{color:a},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof r.markFeatureRender&&r.markFeatureRender("imageblock",a);f()}}),k.postCountMetric("swatchClick"))}var p,d,q,n;return function(a,b,k,w){p=this;d=a;q=b;n=w;f.on("image-block-twister-swatch-hover",m);f.on("image-block-twister-swatch-click",c);p.render=function(a,b,c,d,f){};p.update=function(a){}}});"use strict";u.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader","postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",
function(f,a,b,k,m,c,p){function d(b,e,g,c){!h.autoplayVideo||T||h.useChromelessVideoPlayer?!k.isjQueryObjDefined(b.find(".a-button-selected"))&&(g=v.getCurrentItem(),!c||h.prioritizeVideos||"chromeless-video"===g.type&&h.autoplayVideo)&&(c=k.getVideoHash(g.color,0,h),-1!==c&&(e+=0,l.dispatch("updateModel",{data:{index:0,thumbnailIndex:e,variant:c.variant,type:h.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),e=b.find(".item").get(e),k.selectGivenThumbnail(a(e),b))):(k.selectGivenThumbnail(b.find("img:last"),
b),k.fadeToThumbnail(b.find("img").length-1,J,b))}function q(a){var b=v.getCurrentItem().color;if(h.useChildVideos&&!h.colorToVideo[b]){var e=function(){if(a){h.colorToVideo[b]=a;var e={type:"updatedData",data:v.getCurrentItem()};l.dispatch("updateView",e)}};h.lazyLoadExperienceDisabled?e():u.when(k.rankedImagesReadyEvent(h.colorToAsin[b].asin)).execute(function(){e()})}}function n(a){if(!h.useChildVideos)return k.lazyLoadingRequired(v.getCurrentItem(),v,h)?void 0:h.videos;if(h.colorToVideo[a])return h.colorToVideo[a];
var b=h.colorToAsin[a];if(b&&b.asin){var e={};e.params={asin:b.asin,productGroupID:h.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:h.useChromelessVideoPlayer,isUDP:h.isUDP};h.isDPXFeatureEnabled||(e.success=function(a){q(a)},m.load("/gp/product/features/apparel-main-image/videos.html",e));return h.colorToVideo&&h.colorToVideo[a]}}function Q(){D&&(D.hide(),z.parent().css("z-index",-1),A.hide())}function F(){l.dispatch("selectThumbnail",k.useTabbedImmersiveView(h)?1:0)}function H(e,
g,h,d){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:e[0],streamingUrls:g.url,swfUrl:h.swfUrl,foresterMetadataParams:h.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=k.isjQueryObjDefined(e.find("video"))?"HTML5":"FLASH";c.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){e.parent().css("z-index",8)},videounsupported:function(){F();c.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},
error:function(){F();c.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){D.seek(0)}},cuePoints:[{values:g.durationSeconds-1,type:"position",callback:function(b,g,c){b=c.durationSeconds-c.playheadTimeSeconds;e.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*b,.1,function(){e.parent().css({"background-color":"transparent","z-index":-1});F();a(this).show().css("opacity",1)})}}]})}function w(b){if("chromeful-video"===b.type||"chromeless-video"===b.type){var e=
k.getVideoHash(b.color,b.index,h);if(-1===e)return-1;if("chromeful-video"===b.type){b=b.thumbnailIndex+1;var c=J.width()/J.height(),d=parseInt(e.videoWidth,10),l=parseInt(e.videoHeight,10);k.updateAspectRatio(c,d,l,z);D?(D.show(),k.loadMediaIntoAiry(D,e,S,h.tabletWeb)):D=h.tabletWeb?E:k.createAiryInstanceForChromefulNotUseTabbedImmersiveView(z,e,S,null,h.autoplayVideo,J,A,x,b,h.useTabbedImmersiveView,B,G,K);b:if(k.useTabbedImmersiveView(h)){if(1<k.getVideosCount(v.getCurrentItem().color,h)){if(k.isDefined(I)){A.show();
break b}I=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(h.staticStrings.watchMoreVideos);A.find("#videoCaption").append(I);f.declarative.create(I,"videoIngressClick",g)}k.playVideoInImmersiveView(h,v.getCurrentItem().color)&&(f.declarative.create(z,"videoIngressClick",g),z.attr&&z.attr("data-ux-click",""),z.children().css("z-index","-1"),z.css("display","inline-block"))}else A.find("#videoCaption").text(h.staticStrings.playVideo),A.show();e=D;h.autoplayVideo&&e&&!T&&(k.toggleVideoCaption(A),
e.setVolume(0),e.show(),e.play(),T=!0)}else D?(D.show(),k.loadMediaIntoAiry(D,e,S,h.tabletWeb),D.play(),A.show()):(D=H(z,e,S))&&D.play()}}function C(b,e,l){var p=n(e);e=b;var v=k.isDefined(p)&&0<p.length&&h.alwaysIncludeVideo?1:0;k.isDefined(p)&&0<p.length&&!h.alwaysIncludeVideo&&b===h.maxAlts&&c.postCountMetric("IBVideoDrop");v&&b===h.maxAlts&&(x.find(".item:last").remove(),b--);k.isDefined(p)&&(a.each(p,function(e,d){if(b<h.maxAlts){var f=h.useChromelessVideoPlayer?"chromeless-video":"chromeful-video",
l={type:f,index:e,thumbnailIndex:b,variant:d.variant};g={type:"video-ingress",index:e,thumbnailIndex:b,variant:d.variant};k.useTabbedImmersiveView(h)&&("chromeful-video"===f&&(U+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb","")),h.altsOnLeft||(U+=" a-align-top"));k.createThumbnail(l,d.thumb,x,U);if(2===h.dp60VideoPosition){var v=x,l=h.dp60VideoPosition;if(0!==l){var m=v.children(".imageThumbnail"),v=v.children(".videoBlockIngress");m&&v&&m[l-
1]&&a(m[l-1]).before(v[0])}}k.useTabbedImmersiveView(h)&&(M(x.find(".videoBlockIngress img"),h.videoIngressATFSlateThumbURL),l=1<p.length?"multiple-videos":"one-video",(m=1<p.length?p.length+" "+h.staticStrings.multipleVideos:h.staticStrings.singleVideo)&&x.find(".videoBlockIngress").append(x.find("#videoCount_template").clone().text(m).attr("id","videoCount")).addClass(l));l=c.buildNexusMetric("ib.thumbnailImpression",b+1,d.mediaObjectId,d.groupType,B,G,K,R);c.emitNexusMetric(l);l=c.buildNexusMetric("ib.thumbnailRender",
b+1,d.mediaObjectId,d.groupType,B,G,K,R);c.emitNexusMetric(l);X||(X=!0,c.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));b++}if(k.useTabbedImmersiveView(h))return!1}),d(x,e,b,l),h.imageBlockRenderingStartTime&&c.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",f.now()-h.imageBlockRenderingStartTime));return b}function M(a,b){var e=a.attr("src");if(e&&b){a.attr("src",b);var g=new Image;g.onload=function(b){a.attr("src",e)};g.src=
e}}function N(a){D&&D.pause();a.data=g;a.clickTimeStamp=a.$event.timeStamp;var b="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";l.dispatch("imageClick",a);c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=c.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,h.videos[0].mediaObjectId,h.videos[0].groupType,B,G,K,R);c.emitNexusMetric(a);c.postCountMetric(b)}function L(a){E=a.player;E.hide=function(){E.pause();f.$("#main-video-container").find(".vse-player-container").hide()};
E.show=function(){f.$("#main-video-container").find(".vse-player-container").show();E.play()};E.getMediaSourceInfo=function(){return k.getMediaSourceInfo()}}var P,h,v,l,x,z,A,J,I,D,S,g,e,E,G,B,K,R,V,X=!1,T=!1,U="videoThumbnail";return function(b,d,m,n){P=this;h=b;v=d;l=n;S=h.airyConfig;K=h.contentWeblab&&h.contentWeblab+":"+h.contentWeblabTreatment;h.colorToVideo={};h.colorToVideo[h.landingAsinColor]=h.colorToVideo[h.defaultColor]=h.videos;h.tabletWeb?(V="tablet",R="applicationType.ImageBlock.vse_ib_tablet_web"):
f.capabilities.tablet?(V="tablet",f.capabilities.isAmazonApp&&(R="applicationType.ImageBlock.vse_ib_tablet_app")):(V="desktop",R="desktop_web.ImageBlock.vse_ib_iv");P.render=function(b,g,c,d,l,m){Q();x=d;z=l.find("#main-video-container");A=z.parent().find("#video-canvas-caption");J=a("#main-image-container");B=r.location.href;c=v.getCurrentItem().color;!0===m?G=h.mediaAsin:(G=h.colorToAsin[c]&&h.colorToAsin[c].asin,G=k.isDefined(G)?G:h.mediaAsin);h.useChromelessVideoPlayer||z.addClass("chromeful-container");
e=C(g,b,m);w(v.getCurrentItem());k.useTabbedImmersiveView(h)&&f.declarative("videoIngressClick",["click"],N);c=v.getCurrentItem().color;b=k.getVideoHash(c,0,h);-1!==b&&h.tabletWeb&&(b=k.getNilgiriServiceAjaxRequest(h,c,b),p.get(f,"#main-video-container",b,function(){f.$("#main-video-container").find(".vse-player-container").hide()},function(){f.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return e};P.update=function(a){var b=a.data;"ingress"===b.type||k.lazyLoadingRequired(b,
v,h)||Q();if("swatchHover"===a.type)b.color===v.getCurrentItem().color?w(v.getCurrentItem()):a.captured||k.lazyLoadingRequired(b,v,h)&&!k.lazyLoadOnHoverEnabled(h)&&w(v.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var d=k.getVideoHash(b.color,b.index,h);if("mouseenter"===a.type&&(c.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+e),"chromeless-video"===b.type)){var p=c.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,d.mediaObjectId,
d.groupType,B,G,K,R);c.emitNexusMetric(p)}w(b);h.usePeekHover&&"click"!==a.type||!f.$(a.$currentTarget).closest("li").hasClass("videoThumbnail")||(k.selectGivenThumbnail(a.$declarativeParent,x),"click"===a.type&&(d=c.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,d.mediaObjectId,d.groupType,B,G,K,R),(!k.useTabbedImmersiveView(h)&&"chromeless-video"===b.type||"tablet"==V)&&c.emitNexusMetric(d),k.useTabbedImmersiveView(h)&&(c.emitNexusMetric(d),c.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+e),g.action="videoIngressClick",g.clickTimeStamp=a.$event.timeStamp,g.$event=a.$event,g.$currentTarget=a.$currentTarget,l.dispatch("videoIngressClick",g),c.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(h.isDPXFeatureEnabled)f.on("triggerVideoAjax",q);f.on("vsePlayer-imageblock_tablet",L)}});"use strict";u.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",
function(f,a,b,k,m,c,p,d){function q(a){return a.hiRes||a.large||a.main[a.main.length-1]}function n(){t.find("#ivTitle").click(function(){W.hide()})}function Q(){O=Pa?{type:"360-spin"}:ba.getCurrentItem()}function F(){var a=t.find("#ivStage"),b=W.$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-d.getDimension(e,"padding-top")-d.getDimension(e,"padding-bottom");t.css("height",b);var e=t.find("#ivTitle").outerHeight(!0),g=t.find("#ivVariationSelection").outerHeight(!0),
c=t.find("#ivMediaSelection").outerHeight(!0),h=t.find("#ivThumbs"),f=d.getDimension(h,"margin-top")+d.getDimension(h,"margin-bottom");h.css("height",b-e-g-c-f);t.find("#ivLargeImage").css("height",b);a.css("width",t.width()-d.getDimension(t,"padding-left")-d.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-d.getDimension(a,"margin-left")-d.getDimension(a,"margin-right"))}function H(){t.find("#ivMediaSelect").change(function(){var b=a(this).val();"all"===b?(t.find("#ivVideoList").hide(),
t.find("#ivThumbs").show(),t.find(".ivThumbVideo").show(),"chromeful-video"===O.type&&t.find("#ivVideo_"+O.index).click()):"images"===b?(t.find("#ivVideoList").hide(),t.find("#ivThumbs").show(),t.find(".ivThumbVideo").hide(),"chromeful-video"===O.type&&(0===fa&&0===aa?t.find("#iv360").click():0===fa?t.find("#ivHeroImage_0").click():t.find("#ivImage_0").click())):"videos"===b&&(t.find("#ivVideoList").show(),t.find("#ivThumbs").hide(),"chromeful-video"!==O.type?t.find("#ivVideoList_0").click():t.find("#ivVideoList_"+
O.index).click())})}function w(){var a=t.find("#ivStage").find("#ivLargeImage"),b=a.width(),e=a.height(),g=a.find(".fullscreen");g.removeAttr("style");var c=g.width(),d=g.height();0<g.length&&(g[0].naturalWidth&&(c=g[0].naturalWidth),g[0].naturalHeight&&(d=g[0].naturalHeight));a.css("cursor","auto");var c=0===c?1:c,d=0===d?1:d,h=Math.min(b/c,e/d),f=d*h,l=c*h;1>h?(Qa?a.css("cursor","url('"+y.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor",
"zoom-in")),za=!0):za=!1;c=Math.min(l,c);d=Math.min(f-20,d);g.css({"margin-top":(e-d)/2,"margin-left":(b-c)/2,height:d,width:c});a.css("visibility","visible");Aa=!1}function C(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();d.animateStageIn(b);b.append(a);w()}function M(){ga&&ga.pause();t.find("#ivLarge360").css("display","none");t.find("#ivLargeVideo").css("display","none");t.find("#ivLargeImage").css("display","none");x()}function N(e){M();t.find("#ivLargeImage").css("display",
"block");var g;"hero-image"===e?b.isDefined(ja)&&(g=q(ja[O.index])):b.isDefined(ka)&&(g=q(ka[O.index]));if(b.isDefined(g)){t.find(".fullscreen").remove();var c=a("\x3cimg\x3e").attr("src",g).addClass("fullscreen"),h=t.find("#ivLargeImage");d.animateStageOut(h,function(){c.load(function(){C(c)});if(c[0].complete)C(c);else{h.empty();var b=(h.height()-104)/2,e=(h.width()-80)/2;a("\x3cimg\x3e").attr("src",y.staticImages.spinner).css({position:"relative",top:b+"px",left:e+"px"}).appendTo(h)}})}}function L(){var a=
parseInt(O.index,10)+1;a>=ha.length||t.find("#ivVideo_"+a).click()}function P(){var a;b.isDefined(ha)&&(a=ha[O.index]);if(b.isDefined(a)){M();var e=t.find("#ivLargeVideo").css("display","block");ga?(ga.isDetached()&&ga.attach(e[0]),b.loadMediaIntoAiry(ga,a,wa,y.tabletWeb),ga.show()):(ga=b.createAiryInstanceForChromeful(e,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&ga.bind("ended",L));ga.play({isAsync:!0})}}function h(){Q();var a;a="hero-image"===O.type?t.find("#ivHeroImage_"+O.index):"image"===
O.type?t.find("#ivImage_"+O.index):"chromeful-video"===O.type||"chromeless-video"===O.type?t.find("#ivVideo_"+O.index):"360-spin"===O.type?t.find("#iv360"):b.isDefined(ja)?t.find("#ivHeroImage_"+O.index):t.find("#ivImage_"+O.index);b.isjQueryObjDefined(a)||(a=t.find("#ivImage_0"));v(a)}function v(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(O.type="chromeful-video",O.index=a.attr("id").split("_")[1],P()):a.hasClass("ivHeroImage")?(O.type="hero-image",
O.index=a.attr("id").split("_")[1],N(O.type)):a.hasClass("iv360Image")?(O.type="360-spin",O.index=0,l()):(O.type="image",O.index=a.attr("id").split("_")[1],N(O.type))}function l(){M();t.find("#ivLarge360").css("display","block");D();var a=t.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});d.animateStageIn(a)},200);A();m.postCountMetric("dppc_click360");ta=Date.now()}function x(){0<ta&&(z("dppc_duration360",Date.now()-ta),ta=0)}function z(a,b){r.ue&&r.ue.count(a,b)}
function A(){if(0<qa){var a=t.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function J(b,e){if(qa<b.length){var g=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:sa+"px"});g.hide();e.append(g);g.get(0).onload=function(){e.closest(document.documentElement).length&&(qa++,1===qa&&(A(),0<ta&&z("dppc_loadTime360",Date.now()-ta)),0<Ga&&z("dppc_perSpriteloadTime360",Date.now()-Ga),t.find("#iv360Spinner").hide(),g.show(),xa=5*Z.imageLocations[Math.floor(ya/
Z.imageLocations[0].length)][ya%Z.imageLocations[0].length],J(b,e))};g.attr("src",b[qa].replace(/(\._SP)\d+(,)\d+/,"$1"+ua+"$2"+va));Ga=Date.now()}}function I(a){if(b.isDefined(Z.spriteWidthSizes)&&0<Z.spriteWidthSizes.length){var e=Z.spriteWidthSizes,g=e.length,c=e[0],d=e[g-1];if(a<=c)return c;if(a>d)return d;for(c=0;c<g;c++)if(a>e[c]&&a<=e[c+1])return e[c+1]}else return a}function D(){var b=t.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),
b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",y.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),Ha=!0,S())}function S(){if(b.isDefined(Z.spriteURLs)&&b.isDefined(t)&&Ha&&!Ia){var c=t.find("#ivLarge360"),
d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(Z.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",Z.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(y.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=Z.imageWidth,h=Z.imageHeight,f=c.parent().width(),l=c.parent().height(),k=0,p=0;d/h>f/l?(ua=I(f),va=Math.round(h/
d*ua),na=Math.ceil(f),sa=Math.ceil(va/ua*f),p=(l-sa)/2):(va=I(l),ua=Math.round(d/h*va),sa=Math.ceil(l),na=Math.ceil(ua/va*l),k=(f-na)/2);c.css({"margin-left":k,"margin-top":p,width:na+"px",height:sa+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*na+"px");J(Z.spriteURLs,t.find("#image-360-sprites"),0);d=t.find("#ivLarge360");d.bind("mousedown",G);d.bind("touchstart",g);d.bind("touchmove",e);d.bind("touchend",E);a(document).bind("mousemove",B);a(document).bind("mouseup",
K);b.isDefined(y.staticImages.grab)&&c.css("cursor","url('"+y.staticImages.grab+"'), auto");Ia=!0}}function g(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function e(a){Ba&&(R(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function E(a){Ba&&(Ba=!1)}function G(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(y.staticImages.grabbing)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+y.staticImages.grabbing+"'), auto"));return!1}function B(a){Ca&&(R(a.originalEvent.clientX-Ka),Ka=a.originalEvent.clientX)}function K(a){Ca&&(Ca=!1,b.isDefined(y.staticImages.grab)&&(a=t.find("#ivLarge360"),a.css("cursor","url('"+y.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function R(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var e;a=360;for(var g=0;g<qa;g++)for(var c=0;c<Z.imageLocations[g].length;c++){var d=Math.abs(xa-5*Z.imageLocations[g][c]);
d<a&&(a=d,e=g*Z.imageLocations[0].length+c)}e!==ya&&(a=Math.floor(e/Z.imageLocations[0].length),a!==Math.floor(ya/Z.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),g=t.find("#image-360-sprites").children(),La.drawImage(g[a],0,0)),a=t.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=e;a=e%Z.imageLocations[0].length*-1*na;e=-1*Math.floor(e/Z.imageLocations[0].length)*sa;g=t.find("#ivLarge360").children("#image-360-sprites");
g.css("-webkit-transform","translate3d("+a+"px, "+e+"px, 0)");g.css("transform","translate3d("+a+"px, "+e+"px, 0)")}function V(){t.delegate(".ivThumb","click",function(){var b=a(this);v(b)});t.delegate(".ivThumbVideoListOuter","click",function(){t.find(".ivThumbVideoListOuter").removeClass("selected");var b=a(this);b.addClass("selected");O.type="chromeful-video";O.index=b.attr("id").split("_")[1];P()})}function X(){ga&&!ga.isDetached()&&(wa.volume=ga.getVolume(),ga.detach(),!document.all||r.atob||
document.addEventListener||(ga=null));t.find("#ivLargeImage").empty();x()}function T(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function U(b){var e=ra.left-(b.pageX-Da[0])*Ea;f.capabilities.rtl&&(e=ra.left-(a(r).width()-b.pageX-Da[0])*Ea);b=ra.top-(b.pageY-Da[1])*Ea;e=T(e,Fa.left);b=T(b,Fa.top);t.find(".fullscreen").css({left:e,top:b})}function ia(){t.delegate("#ivLargeImage","click",function(a){if(Aa)w();else if(za){t.find(".fullscreen").removeAttr("style");if(za){var b=t.find("#ivLargeImage"),
e=b.find(".fullscreen");Qa?b.css("cursor","url('"+y.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));Aa=!0;var g=t.find("#ivLargeImage");Fa.left=g.width()-e.width();Fa.top=g.height()-e.height();var g=b.height()/2,c=b.width()/2;Da=[b.offset().left+c,b.offset().top+g];ra.top=g-e.height()/2;ra.left=c-e.width()/2;e.css({position:"relative",left:ra.left,top:ra.top});Ea=Math.max(e.height()/b.height(),e.width()/b.width())}U(a)}});
t.delegate("#ivLargeImage","mousemove",function(a){Aa&&U(a)})}function da(e){if(b.isImmersiveViewEnabled(y,ba.getCurrentItem().color))if(Ma){var g=e.$event.originalEvent;g.acknowledge&&g.acknowledge(e.$currentTarget[0]);Pa=b.isDefined(e)&&"button-360-click"===e.action;c.isEnabled&&p.logImmersiveViewRequestServed(c);m.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(W))W.show();else{e=a("#auiImmersiveViewDiv");var g=a(r).height()-150,h=a(r).width()-75;W=Ma.create(e,{name:"immersiveView",
activate:"onclick",width:h,height:g,popoverLabel:"ImmersiveView",hideHeader:!0});e.click()}if(Na){t=a("#ivMain");e=ba.getCurrentItem().color;ka=y.colorImages[e];ja=y.heroImage[e];ha=y.useChildVideos?y.colorToVideo[e]:y.videos;Oa=Y()&&y.spin360ColorEnabled[e];Z=Y()?y.spin360ColorData[e]:ea;Q();ma=aa=pa=fa=0;b.isDefined(ja)&&(aa=ja.length);b.isDefined(ka)&&(fa=ka.length);b.isDefined(ha)&&(pa=ha.length);Oa&&(ma=1);d.populateTitle(t.find("#ivTitle"),45,y);d.populateVariationSelection(t.find("#ivVariationSelection"));
e=t.find("#ivMediaSelect");0===fa+ma||0===pa?(e.parent().hide(),t.find("#ivThumbs").addClass("noMediaSelection")):(e.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(y.staticStrings.allMedia+" ("+(aa+fa+ma+pa)+")").appendTo(e),a("\x3coption/\x3e").attr("value","images").text(y.staticStrings.images+" ("+(aa+fa+ma)+")").appendTo(e),a("\x3coption/\x3e").attr("value","videos").text(y.staticStrings.videos+" ("+pa+")").appendTo(e),e.parent().show(),e.val("all"));e=t.find("#ivThumbs");
e.find(".ivRow").not(".placeholder").remove();for(var g=aa+fa+pa+ma,l=h=0;h<g;)for(var k=e.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(e),v=0;3>v&&h<g;v++,h++,l++)if(l<aa){var n=ja[h].thumb,E=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+h).appendTo(k);E.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(n)+'") center no-repeat')}else if(l>=aa&&l<fa+aa)n=ka[h-aa].thumb,E=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(h-aa)).appendTo(k),E.find(".ivThumbImage").css("background",'url("'+d.getResizedThumbnailURL(n)+'") center no-repeat');else if(l>=aa+fa&&l<fa+aa+ma)E=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(k),E.find(".ivThumbImage").css("background",'url("'+(b.isDefined(y.staticImages.icon360)?d.getResizedThumbnailURL(y.staticImages.icon360,!0):"")+'") center no-repeat');else if(n=ha[h-fa-aa-ma],E=e.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(h-fa-aa-ma)).appendTo(k),E.find(".ivThumbImage").css("background",'url("'+n.thumbUrl+'") center no-repeat'),b.isDefined(n)){var q={position:"triggerTop"},x=t.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");x.find(".ivVideoPopoverTitle").text(n.title);x.find(".ivVideoPopoverDuration").text(n.durationTimestamp);q.inlineContent=x[0];f.declarative.create(E,"a-tooltip",q)}e=t.find("#ivVideoList");e.find(".ivThumbVideoListOuter").not(".placeholder").remove();
g=e.find(".placeholder");for(h=0;h<pa;h++)l=ha[h],k=g.clone().removeClass("placeholder").appendTo(e),k.attr("id","ivVideoList_"+h),k.find(".ivThumbImage").css("background",'url("'+l.thumbUrl+'") center no-repeat'),k.find(".ivThumbTitle").text(l.title),k.find(".ivThumbDuration").text(l.durationTimestamp);t.find("#ivLarge360").empty();qa=0;Ia=Ha=!1;wa=y.airyConfig;Na=!1;Ra()}}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||
0)+1);else m.postCountMetric("immersiveViewNotExistsClickCount")}function oa(a){var e=y.colorToAsin[a],g={},c=500;if(e&&e.asin){g.params={asin:e.asin};var d="360"+e.asin,h=Date.now();g.success=function(e){z("dppc_asyncRequestTime360",Date.now()-h);e&&b.isDefined(e.spin360.spin360Model)?(b.ajaxState(d,"success"),y.spin360ColorData[a]=e.spin360.spin360Model,a===ba.getCurrentItem().color&&(Z=y.spin360ColorData[a],S())):g.error()};g.error=function(){m.postCountMetric("dppc_asyncFailed360");z("dppc_asyncRequestTime360",
Date.now()-h);c*=2;16E3>=c?setTimeout(function(){h=Date.now();k.load("/gp/product/features/apparel-main-image/360.html",g)},c):b.ajaxState(d,"fail")};b.ajaxState(d)&&"fail"!==b.ajaxState(d)||(k.load("/gp/product/features/apparel-main-image/360.html",g),b.ajaxState(d,"sent"))}}function Y(){return b.isDefined(y.spin360ConfigEnabled)&&y.spin360ConfigEnabled}var ca,y,ba,la,W,t,ja,ka,ha,aa,fa,pa,ma,O,ga,wa,Z,Oa,na,sa,va,ua,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,ta=0,Ga=0,Ca=!1,Ba=!1,qa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),
Na=!0,Aa=!1,za=!1,Fa={},ra={},Ea,Da,Ma;u.when("a-modal").execute(function(a){Ma=a});var Ra=f.once(function(){H();V();ia();f.on("a:popover:afterUpdatePosition:immersiveView",F);f.on("a:popover:afterShow:immersiveView",h);f.on("a:popover:afterHide:immersiveView",X);n()});return function(e,g,h,l){ca=this;y=e;ba=g;c.refToModel=ba;la=l;Y()&&(y.spin360ColorData[y.landingAsinColor]=y.spin360ColorData[y.defaultColor],y.spin360ColorEnabled[y.landingAsinColor]=y.spin360ColorEnabled[y.defaultColor]);b.isDefined(y.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",d.addStyleCodeToURL(y.staticImages.icon360,"_FMpng_RI_"));ca.render=function(a,e,g,c,d,h){Na=!0;Y()&&y.spin360ColorEnabled[a]&&!b.isDefined(y.spin360ColorData[a])&&(y.spin360ColorData[a]={},oa(a));b.isImmersiveViewEnabled(y,ba.getCurrentItem().color)&&Y()&&y.spin360ColorEnabled[a]&&(e===y.maxAlts&&(a=c.find(".item.imageThumbnail"),g=c.find(".item.videoThumbnail"),b.isDefined(g)&&1<g.length?g.last().remove():a.last().remove(),
e--),a=c.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(a,"button-360-click"),c.append(a),e++,m.postCountMetric("dppc_display360"));return e};ca.update=function(a){};b.isImmersiveViewEnabled(y,ba.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");la.register("imageClick",da);la.register("button360Click",da)}});"use strict";u.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(f,a,b,k,m,c,p){function d(){var b=H.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),c=b.find(".a-popover-inner"),b=b.height()-p.getDimension(c,"padding-top")-p.getDimension(c,"padding-bottom");a("#iv-tab-view-container").css("height",b);M=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<M?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),
c=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=c):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",b);f.trigger("dp:image-block:immersive-view:resize")}function q(){f.trigger("dp:image-block:immersive-view:reset")}function n(d){if(b.isImmersiveViewEnabled(F,H.getCurrentItem().color))if(L){var h=d.$event.originalEvent;h.acknowledge&&h.acknowledge(d.$currentTarget[0]);m.isEnabled&&c.logImmersiveViewRequestServed(m);
k.postCountMetric("dppc_immersiveViewOpened");b.isDefined(d)&&("button-360-click"===d.action?a("#iv360TabHeading").click():"videoIngressClick"===d.action?(N=d.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===d.action?(N=d.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());h=H.getImmersiveViewModalInstance();if(b.isDefined(h))h.show();else{d=a("#auiImmersiveViewDiv");var h=Math.min(Math.max(a(r).height()-150,540),1080),p=Math.min(Math.max(a(r).width()-
75,990),1980),h=L.create(d,{name:"immersiveView",activate:"onclick",width:p,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});H.setImmersiveViewModalInstance(h);d.click()}C&&(C=!1,P(),f.trigger("dp:image-block:immersive-view:init"))}else r.performance&&performance.now&&r.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else k.postCountMetric("immersiveViewNotExistsClickCount")}var Q,F,H,w,C=!0,M=0,N,L;u.when("a-modal").execute(function(a){L=
a});var P=f.once(function(){f.on("a:popover:afterUpdatePosition:immersiveView",d);f.on("a:popover:afterShow:immersiveView",d);f.on("a:popover:afterHide:immersiveView",q)}),h=f.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(c){var d=b.filter(".iv-active");d.attr("id")!==a(this).attr("id")&&f.trigger("dp:ivTabs:"+d.find("a").attr("data-iv-tab-view")+":deselect",c);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();
d=a(this).find("a").attr("data-iv-tab-view");a("#"+d).show();"ivVideosTab"===d&&(c.clickTimeStamp=N||c.timeStamp);f.trigger("dp:ivTabs:"+d+":select",c);k.postCountMetric("dppc_"+d);return!1})});return function(a,c,d,f){Q=this;F=a;H=c;m.refToModel=H;w=f;Q.render=function(a,b,c,d,h,g){k.postCountMetric("dpcc_altThumbs_"+b);C=!0};Q.update=function(a){};Q.getTitle=function(){};Q.getVariationSelectionInfo=function(){};h();b.isImmersiveViewEnabled(F,H.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");
w.register("imageClick",n);w.register("button360Click",n);b.useTabbedImmersiveView(F)&&(w.register("videoIngressClick",n),w.register("showroomIngressClick",n))}});"use strict";u.when("A").register("ImageBlockLoader",function(f){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;f.ajax(a,b)}}});"use strict";u.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(f,
a,b,k,m,c,p,d,q){function n(a){return null!==a&&"undefined"!==typeof a}function u(b){var e=0;a.each(b,function(a,b){var g=parseInt(b[1],10);g>e&&(e=g)});return e}function F(b){var e=0;a.each(b,function(a,b){var g=parseInt(b[0],10);g>e&&(e=g)});return e}function H(a,b,c){b=b.width();if(c.naturalMainImageSize)return b;a=u(a);0<a&&(b=Math.min(b,a));return b}function w(a,b,c){b=b.height();if(c.naturalMainImageSize)return b;a=F(a);0<a&&(b=Math.min(b,a));return b}function C(b){var e;a.each(b,function(a,
b){n(e)||(e=b[1]/b[0])});return e||1}function M(c,e,d,h,f,l,p,m,n,q,v,x,z){var w=a.extend({},d.foresterMetadataParams);null!==h&&(w.method+="."+h);var F=[];e.disabledViewIds&&(F=e.disabledViewIds);return b.embed({parentElement:c[0],streamingUrls:e.url,contentId:e.mediaObjectId,contentMinAge:Number(e.minimumAge||"")||0,contentTitle:e.title,swfUrl:d.swfUrl,foresterMetadataParams:w,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:e.slateUrl,postMediaSlate:e.slateUrl},
videoAds:d.videoAds,bindings:{play:function(){if("ImmersiveView"===h)A||(A=!0,k.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(J||(J=!0,k.postCountMetric("dppc_chromefulVideoPlayedPV")),!q){var a=k.buildNexusMetric("ib.thumbnailClick",n,e.mediaObjectId,e.groupType,v,x,z);k.emitNexusMetric(a)}}},cuePoints:[{values:e.durationSeconds-1,type:"position",callback:function(a,b,e){f&&(N(0,l,m),L(p))}}],disabledViewIds:F})}function N(a,b,c){b.fadeTo(500,0,function(){P(a,c);b.fadeTo(500,1)})}function L(a){a&&
a.toggle()}function P(b,e){var c=e.find("img");n(c[b])&&a(c[b]).click()}function h(a,b){S[a]=b?b:S[a];return S[a]}function v(b,e,c){c=c||D;c=c.colorImages;if(1>c.length||!n(c[b])||!n(e))return-1;var d=-1;a.each(c[b],function(a,b){b.variant===e&&(d=a)});return d}function l(b,e,c){c=c||D;c=c.colorImages;return!(n(c)&&n(c[b])&&n(c[b][e])&&n(c[b][e].main))||1>a.map(c[b][e].main,function(a,b){return b}).length?-1:c[b][e]}function x(a,b,c,d){d.parent().css("z-index",2);0!==c&&0!==b&&(b/=c,a>b?d.css("width",
b/a*100+"%"):d.css("height",a/b*100+"%"))}function z(b,e){var c;if(c=b.useIV)c=b.colorImages&&b.colorImages[e]&&0<b.colorImages[e].length?!0:!1;p.isEnabled&&(p.IVApplicaple=c,d.logImmersiveViewApplicability(a,p));return c}var A,J,I,D=a.extend(!0,{},m,c),S={};return{isDefined:n,isDefinedAndEmpty:function(a){return n(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return n(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return n(a)?
"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:C,getMaxHeightOfMainImage:w,getMaxWidthOfMainImage:H,getMaxDimensionsOfMainImage:function(a,b,c){if(c.acEnabled)return[b.height(),b.width()];var d=w(a,b,c);b=H(a,b,c);a=C(a);c=b/a;b=Math.min(b,d*a);d=Math.min(d,c);return[d,b]},getContainerHeight:function(a,b,c){var d=a.get(0);a=0;if(n(d)){a=d.offsetWidth/b;a=Math.min(a,c);var h;b=D.mainImageHeightPartitions;c=D.mainImageMaxSizes;if(n(c)&&
n(b)){for(var f=0,k=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=0;d<b.length;d++)k>b[d]&&(f=d+1);c.length>=f&&(h=c[f])}n(h)&&(a=Math.min(h[1],a))}return a},getColorFromState:function(b,c){if(b){c=c||D;var d="";a.each(c.visualDimensions,function(a,c){b[c]&&(d+=" "+b[c])});return d&&d.substring(1)}},createThumbnail:function(a,b,c,d){var h=c.find(".template").clone().removeClass("template").addClass("item"),k=document.createElement("img");k.src=b;h.find(".placeHolder").replaceWith(k);
(b=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===b&&h.addClass("heroImageThumbnail");n(d)&&h.addClass(d);f.declarative.create(h,"thumb-action",a);h.attr&&h.attr("data-ux-click","");c.append(h)},selectGivenThumbnail:function(a,b){var c=a.find(".a-button");b.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");c.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,b,c,d,h,f,k,l){M(a,b,c,d,h,f,k,l,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:M,
loadMediaIntoAiry:function(a,b,c,d){a&&a.getMediaSourceInfo()!==b.url&&(d?a.loadMedia?(I={mediaSourceInfo:[b.url],contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(I)):a.play({videoUrl:b.url,mimeType:"video/mp4",contentId:b.mediaObjectId,refTag:"vse_ib_tablet_web"}):a.loadMedia?a.loadMedia({mediaSourceInfo:b.url,contentId:b.mediaObjectId,contentMinAge:Number(b.minimumAge||"")||0,contentTitle:b.title,slateImages:{preloadSlate:b.slateUrl,postMediaSlate:b.slateUrl}}):a.play({videoUrl:b.url,
mimeType:"video/mp4",contentId:b.mediaObjectId}))},showUnavailable:function(b){b&&(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:N,toggleVideoCaption:L,selectThumbnail:P,spinner:function(b,c){var d=a("#imageBlock .a-spinner").parent();0===d.length&&(d=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),
b.append(d),d.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)","-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?d.show():d.hide();return d},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:h,getIndexForVariant:v,getImageHash:l,lazyLoadingRequired:function(a,b,c){b=Math.max(v(a.color,
b.getCurrentItem().variant,c),0);b=-1!==l(a.color,b,c);a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a=!a||"success"!==h(a);return!c.lazyLoadExperienceDisabled&&!b&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:x,repositionVideoBanner:function(a,b,c,d){setTimeout(function(){var c=a.width()/a.height();x(c,16,9,b)},d||0)},getVideosCount:function(a,b){return b.useChildVideos&&b.colorToVideo[a]?b.colorToVideo[a].length:b.videos?b.videos.length:
0},getVideoHash:function(a,b,c){if(c.useChildVideos){if(!n(c.colorToVideo))return-1;a=c.colorToVideo[a]}else a=c.videos;return n(a)&&n(a[b])&&n(a[b].url)?a[b]:-1},isImmersiveViewEnabled:z,playVideoInImmersiveView:function(a,b){return z(a,b)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return n(I)?I.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,b,c){return{requester:"DetailPageTablet",marketplaceID:c.marketPlaceID,
clientPrefix:"ImageBlock_tablet",locale:c.languageCode,page:"DetailPageTablet",placement:"ImageBlock",video:{videoURL:c.url,imageURL:c.slateUrl}}},addTag:function(a){r.ue&&r.ue.tag&&r.ue.tag(a)},isShoppableScenesEnabled:function(){return q.isEnabled&&0<a(".mirai-scene-image-block-template").length}}});"use strict";u.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(f,a,b,k){function m(c,d,f,m){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var n=
C.getCurrentItem();if(!m||"chromeless-video"!==n.type||!w.autoplayVideo){m=0;if("hero-image"===n.type){m=p(n.color,n.variant);if(-1===m)return;m=-1!==m?m:0}var q=d+m;q>=f&&(m=0,q=d);d=k.getHeroImageHash(w,n.color,m);-1!==d&&(M.dispatch("updateModel",{data:{index:m,thumbnailIndex:q,variant:d.variant,type:"hero-image"}}),d=c.find(".item").get(q),b.selectGivenThumbnail(a(d),c))}}}function c(c,d,f){if("hero-video"===C.getCurrentItem().type)return c;d=w.heroImage&&w.heroImage[d];var k=c;b.isDefined(d)&&
(a.each(d,function(a,d){c<w.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:c,variant:d.variant},d.thumb,N,"imageThumbnail"),c++)}),m(N,k,c,f));return c}function p(c,d){var f=w.heroImage;if(1>f.length||!b.isDefined(f[c])||!b.isDefined(d))return-1;var k=-1;a.each(f[c],function(a,b){b.variant===d&&(k=a)});return k}function d(){if(L.length&&w.repositionHeroImage){var a=k.getHeroDimParams(w,C.getCurrentItem()),c;b.isDefined(a)&&(c=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+
a.yPos+"px ",L.css({"background-position":c,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function q(a,c,d,f){if(L.length&&a&&c){if("function"===typeof d||f){var p=new Image;p.onload=f?function(){L.css("background-image",'url("'+a+'")')}:d;p.src=a}d=c[1];var p=c[0],m;f||L.css({"background-image":'url("'+a+'")'});w.repositionHeroImage&&(c=k.getHeroDimParams(w,C.getCurrentItem(),c),b.isDefined(c)&&(d=c.width,p=c.height,
m=b.isDefined(c.xPos)?c.xPos+"px "+c.yPos+"px ":"center "+c.yPos+"px "));L.css({"background-position":m,"background-size":d+"px "+p+"px ","max-width":d+"px ","min-height":p+"px ",filter:"","-ms-filter":""})}}function n(b,c,d,f){b=k.getHeroImageHash(w,b,c);if(-1===b)return-1;c=a.map(b.main,function(a,b){return b})[0];q(c,b.main[c],d,f)}function r(a,b,c){if("hero-image"!==a.type)return-1;var d=p(a.color,C.getCurrentItem().variant),d=-1!==d?d:0;if(-1===k.getHeroImageHash(w,a.color,d))return-1;var f=
C.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=d;F(a,b,c)}function F(a,b,c){var d=k.getHeroImageHash(w,a.color,a.index),p;p=a&&P&&f.equals(a,P)?!0:!1;P||(P=a);if(!p&&a||b)n(a.color,a.index,b,c),P=a;L.removeClass("hide-background");f.trigger("dp:image-block:update",d)}var u,w,C,M,N,L,P={};return function(f,k,p,m){u=this;w=f;C=k;M=m;w.heroImage[w.landingAsinColor]=w.heroImage[w.defaultColor];u.render=function(b,d,f,h,k,p,g){N=h;L=a("#heroImage");b=c(d,
b,p);r(C.getCurrentItem(),g,p);return b};u.update=function(a){var c=a.data;"ingress"!==c.type&&L.addClass("hide-background");"swatchHover"===a.type?a.captured||(c.type=C.getCurrentItem().type,-1!==r(c)&&(a.captured=!0)):"hero-image"===c.type&&(F(c),"click"!==a.type&&w.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,N))};M.register("resize",d)}});"use strict";u.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(f,a,b){var k,m,c,p;return function(a,q,n,
r){k=this;m=a;c=r;k.render=function(a,c,d,n,q,r,u){p=n;k=this;d=m.maxAlts;n=c;q=m.colorImages[a]?m.colorImages[a].length:0;q+=b.getVideosCount(a,m);a=m.heroImage[a];r=0;a&&(r=a.length);a=q+r;a>d&&(d=a-d,a=p.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),d+="+",n={type:"ingress",index:0,thumbnailIndex:c,variant:""},a.find("#altIngressText").append(d),f.declarative.create(a,"thumb-action",n),p.append(a),n=c++);return n};k.update=function(a){"ingress"===
a.data.type&&"click"===a.type&&c.dispatch("imageClick",a)}}});"use strict";u.when("imageBlockUtils").register("ImageBlockState",function(f){return function(a,b,k){this.getImageHash=function(b){var c=k.getCurrentItem();b=f.getIndexForVariant(c.color,b||"MAIN",a);return f.getImageHash(c.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});"use strict";u.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",
function(f,a){function b(a,b){var d;if(b.repositionHeroImage){d=a[1];var f=a[0];if(768>=(r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight))d*=.7,f*=.7;else{var k=((r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,k=Math.max(Math.min(k,1),0);d*=.7+.3*k;f*=.7+.3*k}d=[d,f]}return d}function k(b,f,d){var k;if(d.repositionHeroImage){var m=r.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;d=d.heroFocalPoint;
if(a.isDefined(d)){k=Math.max((m-Math.min(1500,b))/2,0);var u=Math.max((m-b)/2,0);k-=u;m=Math.max(Math.min(m,1500),1024);k=k+(m-420-23)/2-b/f[1]*d}}return k}function m(b,k,d){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[k])&&a.isDefined(b[k][d])&&a.isDefined(b[k][d].main))||1>f.map(b[k][d].main,function(a,b){return b}).length?-1:b[k][d]}return{getHeroImageHash:m,getHeroDimParams:function(c,p,d){if(c.repositionHeroImage){if(!a.isDefined(d)){d=m(c,p.color,p.index);if(-1===d)return;p=f.map(d.main,
function(a,b){return b})[0];d=d.main[p]}p=b(d,c);c=k(p[0],d,c);return{height:p[1],width:p[0],xPos:c,yPos:75}}}}});"use strict";u.when("postMetric").register("ImageBlockImmersiveViewShowroom",function(f){function a(){this.render=function(){};this.update=function(){}}return function(b,k,m,c){var p=!1,d=new a;u.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(a){a!==ea&&(p=!0,d=new a(b,k,m,c))});b&&!0===b.showroomEnabled&&!1===p&&f.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");
return d}});"use strict";u.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(f,a,b){function k(a,k){var d=f.copy(a);if(b.isDefined(a)&&a.length>k){try{for(var m=-1,n=0;n<a.length;n++){var r=a.charAt(n);if(" "===r||"."===r||"?"===r||";"===r||","===r||":"===r)m=n;if(n===k-4){d=a.substring(0,-1===m?n:m);break}}}catch(u){d=a.substring(0,k-3)}d+="..."}return d}function m(a,b){var d=a.lastIndexOf(".");return a="_"===a.charAt(d-1)?a.substring(0,d-1)+b+a.substring(d):a.substring(0,
d)+"."+b+a.substring(d)}return{getDimension:function(a,b){var d=parseInt(a.css(b),10);return isNaN(d)?0:d},attachTabSelectHandler:function(a,b){f.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){f.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){f.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){f.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){f.on("a:popover:afterHide:immersiveView",
a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:m,getResizedThumbnailURL:function(a,b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var d="_AA50_";b&&(d+="FMpng_RI_");return m(a,d)},populateVariationSelection:function(c){if(b.isDefined(r.DetailPage)&&b.isDefined(r.DetailPage.StateController)){c.empty();
var f=r.DetailPage.StateController.getState(),d=f.variation_label_order,k;for(k in d)if(d.hasOwnProperty(k)){var m=d[k],u=f.selected_variations[m],m=f.variation_display_labels[m];u&&a("\x3cdiv/\x3e").addClass("ivVariations").text(m+":"+u).appendTo(c)}}},populateTitle:function(a,b,d){a.html(d.title);a.attr("title",a.text());a.html(k(d.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,d,f){r.ueLogError&&
r.ueLogError(f,{logLevel:a,attribution:b,message:d})}}});"use strict";u.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",function(f,a,b,k,m){function c(){m.populateTitle(l.find("#ivTitle"),160,h)}function p(){var a=v.getCurrentItem().color;z=h.colorImages[a];x=h.heroImage[a];A=J=0;b.isDefined(x)&&(A=x.length);b.isDefined(z)&&(J=z.length)}function d(a){return a.hiRes||a.large||a.main[a.main.length-1]}function q(){var a=l.find("#ivStage").find("#ivLargeImage"),
b=a.width(),c=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),k=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&(k=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,k=0===k?1:k,m=Math.min(b/f,c/k),p=k*m,n=f*m;1>m?(D?a.css("cursor","url('"+h.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),e=!0):e=!1;f=Math.min(n,f);k=Math.min(p-20,k);d.css({"margin-top":(c-
k)/2,"margin-left":(b-f)/2,height:k,width:f});a.css("visibility","visible");g=!1}function n(a){var b=l.find("#ivLargeImage");b.css("visibility","hidden");b.empty();m.animateStageIn(b);b.append(a);q()}function r(c){l.find("#ivLargeImage").css("display","none");l.find("#ivLargeImage").css("display","block");var e;"hero-image"===c?b.isDefined(x)&&(e=d(x[I.index])):b.isDefined(z)&&(e=d(z[I.index]));if(b.isDefined(e)){l.find(".fullscreen").remove();var f=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),
g=l.find("#ivLargeImage");m.animateStageOut(g,function(){f.load(function(){n(f)});if(f[0].complete)n(f);else{g.empty();var b=(g.height()-104)/2,c=(g.width()-80)/2;a("\x3cimg\x3e").attr("src",h.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(g)}})}}function u(a){l.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?I.type="hero-image":I.type="image";I.index=a.attr("id").split("_")[1];r(I.type);k.postCountMetric("dpcc_iv_thumbCLick_"+
(parseInt(I.index,10)+1)+"_"+(A+J))}function H(){l.delegate(".ivThumb","click",function(){var b=a(this);u(b)})}function w(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function C(a){var b=G.top-(a.pageY-K[1])*B;a=w(G.left-(a.pageX-K[0])*B,E.left);b=w(b,E.top);l.find(".fullscreen").css({left:a,top:b})}function M(){l.delegate("#ivLargeImage","click",function(a){if(g)q();else if(e){l.find(".fullscreen").removeAttr("style");if(e){var b=l.find("#ivLargeImage"),c=b.find(".fullscreen");D?b.css("cursor",
"url('"+h.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));g=!0;var d=l.find("#ivLargeImage");E.left=d.width()-c.width();E.top=d.height()-c.height();var d=b.height()/2,f=b.width()/2;K=[b.offset().left+f,b.offset().top+d];G.top=d-c.height()/2;G.left=f-c.width()/2;c.css({position:"relative",left:G.left,top:G.top});B=Math.max(c.height()/b.height(),c.width()/b.width())}C(a);k.postCountMetric("dpcc_iv_largeImageCLick")}});
l.delegate("#ivLargeImage","mousemove",function(a){g&&C(a)})}function N(){l.find("#ivLargeImage").empty()}function L(d){if(S){l=a("#ivMain");p();I=v.getCurrentItem();c();m.populateVariationSelection(l.find("#ivVariationSelection"));d=l.find("#ivThumbs");d.find(".ivRow").not(".placeholder").remove();for(var e=A+J,f=0,g=0;f<e;)for(var h=d.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(d),k=0;4>k&&f<e;k++,f++,g++)if(g<A){var n=x[f].thumb,q=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id",
"ivHeroImage_"+f).appendTo(h);q.find(".ivThumbImage").css("background",'url("'+m.getResizedThumbnailURL(n)+'") center no-repeat')}else g>=A&&g<J+A&&(n=z[f-A].thumb,q=d.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id","ivImage_"+(f-A)).appendTo(h),q.find(".ivThumbImage").css("background",'url("'+m.getResizedThumbnailURL(n)+'") center no-repeat'));R();S=!1}else c();d=a("#ivImagesTab").height();l.css("height",d);e=l.find("#ivTitle").outerHeight(!0);f=l.find("#ivVariationSelection").outerHeight(!0);
g=l.find("#ivThumbs");h=m.getDimension(g,"margin-top")+m.getDimension(g,"margin-bottom");g.css("height",d-e-f-h);l.find("#ivLargeImage").css("height",d);d=l.find("#ivStage");e=l[0]&&l[0].getBoundingClientRect&&Math.floor(l[0].getBoundingClientRect().width)||l.width();d.css("width",e-m.getDimension(l,"padding-left")-m.getDimension(l,"padding-right")-l.find("#ivThumbColumn").width()-m.getDimension(d,"margin-left")-m.getDimension(d,"margin-right"));I=v.getCurrentItem();d="hero-image"===I.type?l.find("#ivHeroImage_"+
I.index):"image"===I.type?l.find("#ivImage_"+I.index):b.isDefined(x)?l.find("#ivHeroImage_"+I.index):l.find("#ivImage_"+I.index);b.isjQueryObjDefined(d)||(d=l.find("#ivImage_0"));u(d)}var P,h,v,l,x,z,A,J,I,D=navigator.userAgent.match(/msie|trident/i),S=!0,g=!1,e=!1,E={},G={},B,K,S=!0,R=f.once(function(){H();M();m.attachImmersiveViewResizeHandler(L);m.attachTabDeselectHandler("ivImagesTab",N)});return function(b,c,d,e){P=this;h=b;v=c;P.render=function(b,c,d,e,f,g){S=!0;p();0===A+J?m.hideTabHeading("ivImagesTabHeading"):
m.unhideTabHeading("ivImagesTabHeading");1===A+J?a("#ivThumbs").hide():a("#ivThumbs").show()};P.update=function(a){};m.attachTabSelectHandler("ivImagesTab",L)}});"use strict";u.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(f,a,b,k,m,c,p){function d(){A.delegate(".ivThumb","click",function(){var b=a(this);A.find(".ivThumb").removeClass("selected");b.addClass("selected");
b.hasClass("ivThumbVideo")&&(J.type="chromeful-video",J.index=b.attr("id").split("_")[1])})}function q(){if(da){var b=a("#ivVideosTab").height();A.css("height",b);var c=A.find(".vse-lb-container");I=b-m.getDimension(c,"padding-top")-m.getDimension(c,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(X){A.css({"max-width":Math.floor(1.77*I)});return}var b=A.find(".vse-player-container"),c=A.find(".vse-video-action-strip"),d=A.find(".vse-lb-video-metadata"),e=Math.floor(I-m.getDimension(d,
"height")-m.getDimension(c,"height")),f=Math.floor(1.77*e);b.css({"max-height":e,"max-width":f,marginLeft:"auto",marginRight:"auto"});d.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}T&&(b=A.find(".vse-vertical-scroll"),c=m.getDimension(b,"margin-top")+m.getDimension(b,"margin-bottom"),b.css("max-height",I-c))}function n(){u();D&&D.pause();U=!1;R=!0;E=null;ia=!0;da=!1}function u(){U=!1;D&&D.pause()}function F(c){E=c.clickTimeStamp?
c.clickTimeStamp:f.now();b.isDefined(z)&&(z.eventTimestamp=E);U=!0;V&&(p.get(f,"#ivVideoBlock",x,W,t),A=a("#ivVideoBlock"),l.getCurrentItem(),J=l.getCurrentItem(),y(),L());q();V=!1;C()}function H(b){V&&(A=a("#ivVideoBlock"),l.getCurrentItem(),J=l.getCurrentItem(),y());U&&C();q()}function w(a){D=a.player;k.postTimeMetric("vse_ib_desktop_player_initialisation_duration",f.now()-ca);v.imageBlockRenderingStartTime&&k.postTimeMetric("vse_ib_desktop_time_to_player_interactive",f.now()-v.imageBlockRenderingStartTime);
da&&(L(),C())}function C(){if(D&&U&&(A.find(".vse-lb-container").animate({opacity:1},200),D.play(z),k.postCountMetric("dpcc_vse_videoBlock_video_played"),R)){var a=r.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,k.postTimeMetric("dpcc_vse_vitff",a),R=!1)}}function M(){f.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function N(a){S=a.popover.$popover;da=!0;L()}function L(){if(da&&ia&&U&&D){S.addClass(f.$(S).find(".vse-lb-container").data("cssClass"));var a=z;ea&&
(a=Y,ea=!1);f.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:a});q();ia=!1}}function P(a){document.getElementsByClassName("videoBlockIngress")[0].click();Y=a;ea=!0}var h,v,l,x,z,A,J,I,D,S,g,e,E,G,B,K,R=!0,V=!0,X=!1,T=!1,U=!1,ia=!0,da=!1,ea=!1,Y,ca=0,y=f.once(function(){d();m.attachImmersiveViewResizeHandler(H);m.attachTabDeselectHandler("ivVideosTab",u);m.attachImmersiveViewResetHandler(n)}),ba=function(c,d,e){a("#ivVideoBlockSpinner").addClass("aok-hidden");
k.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+d.placement);c=l.getCurrentItem().color;c=b.getVideoHash(c,0,v);D||(D=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),c,v.airyConfig,"ImmersiveView"));X=!0;a("#ivVideoBlock").css({"max-width":1.77*I,margin:"0 auto"});U&&X&&D.play({isAsync:!0})},la=function(b,c,d){V||p.get(b,"#ivVideoBlock",x,W,t);a("#ivVideoBlockSpinner").addClass("aok-hidden")},W=function(a,b,c){T=!0;q()},t=function(a,b,c){k.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+
b.pageContext.placement+"_"+b.configuration.type)};return function(a,d,k,p){h=this;v=a;l=d;h.render=function(a,d,h,k,p,n){a=l.getCurrentItem().color;d=b.getVideoHash(a,0,v);!0===n?g=v.mediaAsin:(g=v.colorToAsin[a]&&v.colorToAsin[a].asin,g=b.isDefined(g)?g:v.mediaAsin);e=null!==v.vseVideoDataSourceTreatment&&"T1"===v.vseVideoDataSourceTreatment?"ASIN":"physicalID";G=v.contentWeblab;B=v.contentWeblabTreatment;K=v.parentAsin||"";V=!0;-1===d?m.hideTabHeading("ivVideosTabHeading"):(m.unhideTabHeading("ivVideosTabHeading"),
x={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:d.marketPlaceID,locale:d.languageCode,product:{contentID:g,contentIDType:"ASIN",parentContentID:K,parentContentIDType:"ASIN"},video:{contentID:d.mediaObjectId,contentIDType:e,videoURL:d.url,imageURL:d.slateUrl},requestId:v.dpRequestId,weblabContext:[{name:G,assignment:B,ignoreForG2S2Key:!0}],metadata:{ProductTitle:v.title}},z={videoUrl:x.video.videoURL,contentId:x.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(E)?
E:f.now(),imageUrl:x.video.imageURL,productAsin:x.product.contentID,index:0},b.isDefinedAndNotEmpty(D)&&(D.destroy(),D=null),ca=f.now(),c.get(f,"#ivVideoBlock",x,la,ba))};h.update=function(a){};m.attachTabSelectHandler("ivVideosTab",F);f.on("vsePlayer-detailpage-imageblock",w);f.on("a:popover:afterShow:immersiveView",N);f.on("a:popover:beforeHide:immersiveView",M);f.on("detailpage-imageblock-leave-pip",P)}});"use strict";u.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric",
"imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(f,a,b,k,m,c,p,d,q){function n(){var b=a("#iv360Tab").height();B.css("height",b);var c=B.find("#ivTitle360").outerHeight(!0),d=B.find("#ivVariationSelection360").outerHeight(!0),e=B.find("#ivThumbs360"),f=p.getDimension(e,"margin-top")+p.getDimension(e,"margin-bottom");e.css("height",b-c-d-f);b=B.find("#ivStage360");c=B[0]&&B[0].getBoundingClientRect&&Math.floor(B[0].getBoundingClientRect().width)||
B.width();b.css("width",c-p.getDimension(B,"padding-left")-p.getDimension(B,"padding-right")-B.find("#ivThumbColumn360").width()-p.getDimension(b,"margin-left")-p.getDimension(b,"margin-right"))}function r(){C();var a=B.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});p.animateStageIn(a)},200);u()}function u(){if(0<t){var a=B.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function H(b,d){if(t<b.length){var f=a("\x3cimg /\x3e").css({display:"block",
width:6*R+"px",height:V+"px"});f.hide();d.append(f);f.get(0).onload=function(){d.closest(document.documentElement).length&&(t++,1===t&&(u(),0<y&&(m.time("dppc_loadTime360",Date.now()-y,e.mediaAsin),c.postTimeMetric("dppc_loadTime360",Date.now()-y))),0<ba&&(m.time("dppc_perSpriteloadTime360",Date.now()-ba,e.mediaAsin),c.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ba)),B.find("#iv360Spinner").hide(),f.show(),Y=5*K.imageLocations[Math.floor(ca/K.imageLocations[0].length)][ca%K.imageLocations[0].length],
H(b,d))};f.attr("src",b[t].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+X));ba=Date.now()}}function w(a){if(b.isDefined(K.spriteWidthSizes)&&0<K.spriteWidthSizes.length){var c=K.spriteWidthSizes,d=c.length,e=c[0],f=c[d-1];if(a<=e)return e;if(a>f)return f;for(e=0;e<d;e++)if(a>c[e]&&a<=c[e+1])return c[e+1]}else return a}function C(){var b=B.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),
height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",e.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),da=!0,M())}function M(){if(b.isDefined(K.spriteURLs)&&b.isDefined(B)&&da&&!oa){var c=B.find("#ivLarge360"),d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",
width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(K.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",K.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(e.staticStrings.dragToSpin).appendTo(d);d.appendTo(c);var d=K.imageWidth,f=K.imageHeight,g=c.parent().width(),k=c.parent().height(),m=0,p=0;d/f>g/k?(T=w(g),X=Math.round(f/d*T),R=Math.ceil(g),V=Math.ceil(X/T*g),p=(k-V)/2):(X=w(k),T=Math.round(d/
f*X),V=Math.ceil(k),R=Math.ceil(T/X*k),m=(g-R)/2);c.css({"margin-left":m,"margin-top":p,width:R+"px",height:V+"px",overflow:"hidden",position:"relative"});c.children("#image-360-sprites").css("width",6*R+"px");H(K.spriteURLs,B.find("#image-360-sprites"),0);d=B.find("#ivLarge360");d.bind("mousedown",h);d.bind("touchstart",N);d.bind("touchmove",L);d.bind("touchend",P);a(document).bind("mousemove",v);a(document).bind("mouseup",l);b.isDefined(e.staticImages.grab)&&c.css("cursor","url('"+e.staticImages.grab+
"'), auto");oa=!0}}function N(a){W=!0;ia=a.originalEvent.targetTouches[0].clientX}function L(a){W&&(x(a.originalEvent.targetTouches[0].clientX-ia),ia=a.originalEvent.targetTouches[0].clientX)}function P(a){W&&(W=!1)}function h(a){la=!0;U=a.originalEvent.clientX;b.isDefined(e.staticImages.grabbing)&&(a=B.find("#ivLarge360"),a.css("cursor","url('"+e.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor","url('"+e.staticImages.grabbing+"'), auto"));return!1}function v(a){la&&
(x(a.originalEvent.clientX-U),U=a.originalEvent.clientX)}function l(a){la&&(la=!1,b.isDefined(e.staticImages.grab)&&(a=B.find("#ivLarge360"),a.css("cursor","url('"+e.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function x(a){Y-=a/R*180;ka&&(m.count("dppc_360dragToSpin",e.mediaAsin),c.postCountMetric("dppc_360dragToSpin"));ka=!1;for(a=Y;0>a;)a+=360;for(;360<a;)a-=360;Y=a;var d;a=360;for(var f=0;f<t;f++)for(var g=0;g<K.imageLocations[f].length;g++){var k=Math.abs(Y-
5*K.imageLocations[f][g]);k<a&&(a=k,d=f*K.imageLocations[0].length+g)}d!==ca&&(a=Math.floor(d/K.imageLocations[0].length),a!==Math.floor(ca/K.imageLocations[0].length)&&(b.isDefined(ja)||(ja=document.createElement("canvas").getContext("2d")),f=B.find("#image-360-sprites").children(),ja.drawImage(f[a],0,0)),a=B.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ca=d;a=d%K.imageLocations[0].length*-1*R;d=-1*Math.floor(d/K.imageLocations[0].length)*
V;f=B.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+a+"px, "+d+"px, 0)");f.css("transform","translate3d("+a+"px, "+d+"px, 0)")}function z(){if(aa){B=a("#ivMain360");var b=E.getCurrentItem().color;J()&&I(b);K=J()?e.spin360ColorData[b]:ea;p.populateTitle(B.find("#ivTitle360"),160,e);p.populateVariationSelection(B.find("#ivVariationSelection360"));B.find("#ivLarge360").empty();t=0;oa=da=!1;ca=Y=0;fa();aa=!1}0!==a("#iv360Tab").height()&&(p.detachImmersiveViewResizeHandler(z),
n(),r(),y=Date.now(),ha=ka=!0,m.count("dppc_click360",e.mediaAsin),c.postCountMetric("dppc_click360"))}function A(a,f,g){a=e.colorToAsin[g];var h={},l=500;if(!a||!a.asin)if(g===e.defaultColor)a={asin:e.winningAsin};else return;h.params={asin:a.asin};var p="360"+a.asin,n=Date.now();h.success=function(a){m.time("dppc_asyncRequestTime360",Date.now()-n,e.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-n);a&&b.isDefined(a.spin360)?((a=a.spin360.spin360Model)&&d.setData(a),b.ajaxState(p,
"success")):h.error()};h.error=function(){m.count("dppc_asyncFailedTransient360",e.mediaAsin);c.postCountMetric("dppc_asyncFailedTransient360");m.time("dppc_asyncRequestTime360",Date.now()-n,e.mediaAsin);c.postTimeMetric("dppc_asyncRequestTime360",Date.now()-n);l*=2;16E3>=l?setTimeout(function(){n=Date.now();k.load("/gp/product/features/apparel-main-image/360.html",h)},l):(m.count("dppc_asyncFailed360",e.mediaAsin),c.postCountMetric("dppc_asyncFailed360"),b.ajaxState(p,"fail"))};b.ajaxState(p)&&"fail"!==
b.ajaxState(p)||(k.load("/gp/product/features/apparel-main-image/360.html",h),b.ajaxState(p,"sent"))}function J(){return e&&b.isDefined(e.spin360ConfigEnabled)&&e.spin360ConfigEnabled}function I(a){return b.isDefinedAndNotEmpty(e.spin360ColorData[a])?!0:b.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled}function D(){ha&&(m.time("dppc_duration360",Date.now()-y,e.mediaAsin),c.postTimeMetric("dppc_duration360",Date.now()-y),ha=!1)}function S(a){a=e.colorToAsin[a.color]&&e.colorToAsin[a.color].asin;
a||(a=e.mediaAsin);return a}var g,e,E,G,B,K,R,V,X,T,U,ia,da=!1,oa=!1,Y=0,ca=0,y=0,ba=0,la=!1,W=!1,t=0,ja,ka=!0,ha=!1,aa=!0,fa=f.once(function(){p.attachImmersiveViewResizeHandler(z);p.attachImmersiveViewResizeHandler(n);p.attachImmersiveViewResetHandler(D);p.attachTabDeselectHandler("iv360Tab",D)});return function(h,k,l,n){g=this;e=h;E=k;G=n;h=e.landingAsinColor;k=e.defaultColor;b.isDefined(e.staticImages.icon360)&&a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",
p.addStyleCodeToURL(e.staticImages.icon360,"_FMpng_RI_"));J()&&(e.spin360ColorData||(e.spin360ColorData={}),h===k&&b.isDefinedAndEmpty(e.spin360ColorData[k])&&delete e.spin360ColorData[k]);f.on(q.TWISTER_DATA_EVENT,function(a){S(E.getCurrentItem())===a&&(K=d.getData(a),M(),a={type:"updatedData",data:E.getCurrentItem()},G.dispatch("updateView",a))});g.render=function(g,h,k,l,n,q){aa=!0;!J()||b.isDefinedAndEmpty(e.spin360ColorData[g])&&!d.getData(S(E.getCurrentItem()))?p.hideTabHeading("iv360TabHeading"):
(e.spin360ColorData[g]=d.getData(S(E.getCurrentItem())),b.isDefinedAndNotEmpty(e.spin360ColorData[g])?(a("#ivThumbs360").hide(),p.unhideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(e,E.getCurrentItem().color)&&J()&&I(g)&&(h===e.maxAlts&&(g=l.find(".item.imageThumbnail"),h=l.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():g.last().remove()),g=l.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),f.declarative.create(g,
"button-360-click"),l.append(g),m.count("dppc_display360",e.mediaAsin),c.postCountMetric("dppc_display360"))):b.isDefined(e.spin360LazyLoadEnabled)&&e.spin360LazyLoadEnabled?(e.spin360ColorData[g]={},p.hideTabHeading("iv360TabHeading"),A(l,h,g)):p.hideTabHeading("iv360TabHeading"))};g.update=function(a){};p.attachTabSelectHandler("iv360Tab",z)}});u.register("nexusLogger360",function(){return{count:function(f,a){r.ue&&r.ue.event({asin:a,metricName:f,metricValue:1},"hit-360","hit360.clientEvent.3")},
time:function(f,a,b){r.ue&&r.ue.event({asin:b,metricName:f,metricValue:a},"hit-360","hit360.clientEvent.3")}}});u.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});u.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(f,a){var b={};return{setData:function(k){var m=k.asin;b[m]||(b[m]=k,f.trigger(a.TWISTER_DATA_EVENT,m))},getData:function(a){return b[a]}}});"use strict";u.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",
function(f,a){u.register("vse_ns_preLoaderHook",function(){function b(k,m){try{var c=k.A,p=k.block,d=k.request,q=k.handleFailure,n=k.handleSuccess,r=c.$;m--;var u=3-m-1,H=c.now();c.ajax("/vap/ew/componentbuilder",{params:d,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=c.now()-H;f.postTimeMetric("vse_preLoaderHook:success:",b);f.postCountMetric("vse_preLoaderHook:success:"+d.page+":"+d.placement+":"+
u);r(p).html(a);n(c,d,a)},error:function(a){f.postCountMetric("vse_preLoaderHook:error:"+d.page+":"+d.placement+":"+u);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<m?b(k,m):(f.postCountMetric("vse_preLoaderHook:error:",1),q(c,d,a))}})}catch(w){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",w)}}return{get:function(a,f,c,p,d){b({A:a,block:f,request:c,handleFailure:d,handleSuccess:p},3)}}});u.register("vse_ns_lazyLoaderHook",function(){function b(k,m,c){try{var p=k.A,
d=k.context,q=k.handleFailure,n=k.handleSuccess;m.attr("data-configuration");var r=atob(m.attr("data-configuration")),u=JSON.parse(r),H={pageContext:d,configuration:u},w=p.now();c--;var C=3-c-1;p.ajax("/vap/ew/subcomponent/"+u.type,{params:H,paramsFormat:"json",method:"post",contentType:"application/json",timeout:d.timeout||5E3,withCredentials:!0,success:function(a){var b=p.now()-w;f.postTimeMetric("vse_lazyLoaderHook:success:",b);f.postCountMetric("vse_lazyLoaderHook:success:"+d.page+":"+d.placement+
":"+u.type+":"+C);m.html(a);n(p,H,a)},error:function(a){f.postCountMetric("vse_lazyLoaderHook:error:"+d.page+":"+d.placement+":"+u.type+":"+C);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<c?b(k,m,c):(f.postCountMetric("vse_lazyLoaderHook:error:",1),q(p,H,a))}})}catch(M){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",M)}}return{get:function(a,f,c,p,d){var q=a.$;q(f+" div[data-configuration]").each(function(){b({A:a,context:c,handleFailure:d,handleSuccess:p},q(this),
3)})}}});u.register("vse_ns_videoPlayer",function(){function b(k,m,c){try{var p=k.A,d=k.block,q=k.request,n=k.handleFailure,r=k.handleSuccess,u=p.$;c--;var H=3-c-1,w=p.now();p.ajax("/vap/ew/subcomponent/vseplayer",{params:q,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:q.timeout||5E3,withCredentials:!0,success:function(a){var b=p.now()-w;f.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);f.postCountMetric("vse_lightPlayerLoaderHook:success:"+q.page+
":"+q.placement+":"+H);u(d).html(a);r(p,q,a)},error:function(a){f.postCountMetric("vse_lightPlayerLoaderHook:error:"+q.page+":"+q.placement+":"+H);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<c?b(k,c):(f.postCountMetric("vse_lightPlayerLoaderHook:error:",1),n(p,q,a))}})}catch(C){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",C)}}return{get:function(a,f,c,p,d){b({A:a,block:f,request:c,handleFailure:d,handleSuccess:p},3)}}})});"use strict";u.when("A","ImageBlockATF",
"ImageBlockBTF","imageBlockUtils","postMetric").execute(function(f,a,b,k,m){var c=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=b.colorImages,d=0,f;for(f in a)a[f]&&a[f].length&&(d+=a[f].length);a="image_size_bucket:gt"+c[c.length-1];for(f=1;f<c.length;f++)if(d<=c[f]){a="image_size_bucket:"+c[f-1]+"-"+c[f];break}m.postCountMetric(a);k.addTag(a)})();(function(){var b=a.colorImages;b&&b.initial&&b.initial.length&&(b=b.initial.length,r.ue&&ue.count&&ue.count("altImageCount",b))})();(function(){var a=
b.lazyLoadExperienceDisabled;k.isDefined(b.lazyLoadExperienceDisabled)&&!a&&(m.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),k.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});u.when("A","get-resource-time","postMetric","afterLoad").execute(function(f,a,b){var k=f.state("desktop-landing-image-data");k&&(k=f.values(k),a=a.getResourceTimeByName("img",k),f.each(a,function(a){a&&(a.responseEnd!=ea&&b.postCountMetric("ibDesktopLandingImageDownloadTime",r.parseInt(a.responseEnd)),
a.transferSize!=ea&&(0===a.transferSize?b.postCountMetric("ibDesktopLandingImageCached",1):(b.postCountMetric("ibDesktopLandingImageSizeInBytes",r.parseInt(a.transferSize)),b.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});u.now().register("ImageBlockShoppableSceneView",function(){function f(){}return function(){this.update=this.render=f}});u.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!1}})});
/* ******** */
(function(k){var f=window.AmazonUIPageJS||window.P,q=f._namespace||f.attributeErrors,c=q?q("DetailPageShowroomImageBlockAssets",""):f;c.guardFatal?c.guardFatal(k)(c,window):c.execute(function(){k(c,window)})})(function(k,f,q){k.when("A","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(c,r,h,e,g,a){function f(a){a=u.colorToAsin[a.color].asin;
a||(a=u.mediaAsin);return a}var b=void 0,u=void 0,m=void 0,p=void 0,k=void 0,n=void 0,t=void 0;return function(d,w,q,l){q=new Date;b=this;u=d;m=w;p=l;c.on(g.TWISTER_DATA_EVENT,function(a){f(m.getCurrentItem())===a&&(a={type:"updatedData",data:m.getCurrentItem()},p.dispatch("updateView",a))});b.render=function(b,d,r,g,w,q){b=new Date;k=g;n=w.find("#main-showroom-container");n.parent().find("#showroom-canvas-caption");c.$("#main-image-container");try{var v=f(m.getCurrentItem());if(h.isDataValidForAsin(v)){var z=
new Date,l=h.getDataForAsin(v);e.refresh(p,l.asin,l.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-z);if(!q){var x=new Date;e.updateMainImage(n,l.imageData,p);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-x)}var y=new Date;d=e.createThumbnail(u,g,d,l.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-y);var A=new Date;c.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-A);if(v!==t){var B=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var C=a.createShowroomAtfEvent(l.defaultStageId,v,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(C);t=v;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-B)}}else c.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(E){c.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-b);return d};b.update=function(b){var t=new Date;try{var d=b.data;m.setCurrentEvent(b);if(d.type===g.SHOWROOM_THUMBNAIL_TYPE){var c=new Date;d.interaction=b.type;d.isUserGenerated=!0;if(h.isDataValidForAsin(f(d))){"mouseenter"===d.interaction&&d.type===g.SHOWROOM_THUMBNAIL_TYPE&&e.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var l=h.getDataForAsin(f(d)).imageData;e.updateMainImage(n,l,p);e.showShowroomMainImage(n)}u.usePeekHover&&"click"!==b.type||
(r.selectGivenThumbnail(b.$declarativeParent,k),"click"===b.type&&r.useTabbedImmersiveView(u)&&e.handleShowroomThumbnailClick(b));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-c)}else d.type!==g.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===b.type?d.color===m.getCurrentItem().color&&m.getCurrentItem().type===g.SHOWROOM_THUMBNAIL_TYPE?e.showShowroomMainImage(n):e.hideShowroomMainImage(n):e.hideShowroomMainImage(n))}catch(D){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-t)};(d=document.getElementById("ivShowroomTabHeading"))&&d.addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=h.getDataForAsin(t).defaultStageId;b=a.createShowroomAtfEvent(b,t,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-q)}});"use strict";k.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_TEXT_T1:"showroom_dp_imageblock_atf_main_image_overlay_text_T1",MAIN_IMAGE_OVERLAY_TEXT_T2:"showroom_dp_imageblock_atf_main_image_overlay_text_T2",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";k.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants",
"showroom-image-block-metrics").register("showroom-image-block-detail-page-rendering",function(c,r,h,e,g,a){function f(n){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);var t=a.createShowroomAtfEvent(p,k,a.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(t);b(n)}function b(a){a.action="showroomIngressClick";a.data=l;m.dispatch("showroomIngressClick",a)}var k,m,p,l;return{createThumbnail:function(a,b,d,c){d===a.maxAlts&&(b.find(".item.imageThumbnail").last().remove(),
d--);l={type:"showroomIngress",index:0,thumbnailIndex:d,variant:c.variant};h.createThumbnail({type:g.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:d,variant:c.variant},c.thumb,b,"showroom-imageblock-thumbnail");d++;return d},updateMainImage:function(a,b){var d=a.find("#showroom-main-image");d.length?d.attr("src",b.hiRes):(d=r('\x3cdiv id\x3d"showroom-main-image-container"\x3e                    \x3cimg src\x3d"'+b.hiRes+'" id\x3d"showroom-main-image"/\x3e                \x3c/div\x3e'),d.appendTo(a),
c.declarative.create(a,"showroom-image-action",l),c.declarative("showroom-image-action",["click"],f),"T2"===e.getTreatment()?(d.addClass("t2"),b=a.find("#showroom-main-image-overlay-container-t2"),b.length||(b=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),d=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT_T2),b=r('                \x3cdiv id\x3d"showroom-main-image-overlay-container-t2"\x3e                    \x3cdiv style\x3d"padding-bottom: 7px;width: 40%;"\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-subtext"\x3e'+
b+'\x3c/span\x3e                    \x3c/div\x3e                    \x3cspan class\x3d"a-button a-button-base"\x3e                        \x3cspan class\x3d"a-button-inner"\x3e                            \x3cinput class\x3d"a-button-input"\x3e                            \x3cspan class\x3d"a-button-text" id\x3d"showroom-main-image-overlay-button"\x3e                                \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"https://m.media-amazon.com/images/G/01/showroom/icon-lightbulb._CB628497379_.png"/\x3e'+
d+"\n                            \x3c/span\x3e                        \x3c/span\x3e                    \x3c/span\x3e                \x3c/div\x3e                "),b.appendTo(a))):(b=a.find("#showroom-main-image-overlay-container-t1"),b.length||(b=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT_T1),d=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),b=r('                \x3cdiv id\x3d"showroom-main-image-overlay-container-t1"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+
(d?d:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+b+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),b.appendTo(a))))},hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return r("#showroom-outer-container").hasClass("aok-hidden")},
handleShowroomIngressClick:b,handleShowroomThumbnailClick:function(c){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var e=a.createShowroomAtfEvent(p,k,a.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(e);b(c)},handleShowroomMainImageClick:f,refresh:function(a,b,d){m=a;k=b;p=d}}});"use strict";k.when("A").register("showroom-image-block-metrics",function(c){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",
IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select",SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER:"showroom:atf:imageBlock:failedToInitializeWeblabTrigger"},
STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",
SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(c){try{if(f.ue&&c){var h=(f.ue.count(c)||0)+1;f.ue.count(c,h)}}catch(e){}},logValue:function(c,h){try{f.ue&&c&&"number"===typeof h&&f.ue.count(c,h)}catch(e){}},createShowroomAtfEvent:function(f,h,e,g){var a={};a.showroomId=f;a.asin=h;a.eventType=e;a.status=g;a.device=c.capabilities?c.capabilities.isAmazonApp?"AmazonApp":c.capabilities.mobile?"mobile":c.capabilities.tablet?
"tablet":"desktop":"";a.userAgent=navigator?navigator.userAgent:"";a.producerId="showroom_atf";a.schemaId="com.amazon.showroom.ingress.clientEvent.3";return a},logShowroomAtfEvent:function(c){try{f.ue&&f.ue.event&&c&&f.ue.event(c,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(h){}}}});"use strict";k.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(c,f){function h(){return g[a]}function e(a){return a in g}var g={},a,k="T1";return{setData:function(b){b&&
b.asin&&b.imageDomain&&b.defaultCollageUrl&&b.defaultStageId&&Array.isArray(b.itemMainImagePhysicalIds)&&(a=b.asin,b.experimentTreatment&&(k=b.experimentTreatment),e(b.asin)||(g[b.asin]=b,c.trigger(f.TWISTER_DATA_EVENT,b.asin)))},getDataForCurrentAsin:h,getDataForAsin:function(a){return g[a]},getStringValue:function(a){return h().displayStrings?h().displayStrings[a]:""},getTreatment:function(){return k},isDataValidForAsin:e}})});
/* ******** */
