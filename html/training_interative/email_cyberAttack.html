<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<link rel="stylesheet" href="./util/ssaTrust_emailWrapper.css">
	<link rel="stylesheet" href="./util/ssaTrust_common.css">

    <style>
      @import url("https://fonts.googleapis.com/css?family=Roboto:900,400");
    </style>
  </head>
  <body>
    <div class="container-center-horizontal">
	
		<!-- Start HTML for Email Reader  -- code that makes it look lik this is in an email client
		You SHOULD NOT need to change any of this --> 

        <div class="sidebar"> 
            <img class="sidebar-icon" src="./images/inbox.svg">
            <img class="sidebar-icon" src="./images/sent.svg">
            <img class="sidebar-icon" src="./images/star.svg">
            <img class="sidebar-icon" src="./images/edit.svg">
            <img class="sidebar-icon" src="./images/alert-octagon.svg">
        </div>
        <div class="top-body-bar">
            <img class="back-arrow" src="./images/arrow-left.svg">
            <div class="body-bar-container">
                <div class="body-bar-item">
                    <img src="./images/archive.svg">
                    <p class="mobile-hide" >Archive</p>
                </div>
                <div class="body-bar-item">
                    <img src="./images/slash.svg">
                    <p class="mobile-hide" >Report Spam</p>
                </div>
                <div class="body-bar-item">
                    <img src="./images/trash.svg">
                    <p class="mobile-hide">Delete</p>
                </div>
            </div>
            <div class="body-bar-item">
                <img class="more-dots" src="./images/more-vertical.svg">
            </div>
            
            
        </div>
		
		<!-- End HTML for Email Reader Wrapper --> 


        <div class="email-content">
            <div class="email-content-container">
			
				<!-- Start HTML for Email Header.  
				See the data file for setting these values -- they are all parameterized, with option overlays.  
				You SHOULD NOT need to change any of this --> 
				
				
                <div class = "overlay-container">
                    <h1 id="subject">Subject of the email</h1>
                    <div class="message-overlay overlay-subject overlay">
                        <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-subject')">
                        <div id="Overlay-subject" class="overlay-text">
                            <p>Body with just explanation</p>
                        </div>
                    </div>
                </div>
                
                <div class="mail-info">
                    <div class="info">
                        <img src="./images/sender icon.svg">
                        <div class="name-receptor">
                            <div class="name-date-sender">
                                <p id="name"> Name</p>
                                <p id ="date-left" class="hide-desktop span-date-hour">Date, Hour (2 days ago)</p>
                                <p id= "sender-top" class="tablet-hide"><email@email.com></p>
                                <div class="message-overlay overlay-name overlay">
                                    <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-name')">
                                    <div id="Overlay-name" class="overlay-text">
                                        <p>Body with just explanation</p>
                                    </div>
                                </div>
                            </div>
                            <div class="toMe">
                                <p>to: <span>Me</span></p>
                                <img id="toMe-Arrow"class="toMe-arrow" src="./images/chevron-up.svg" onclick="displayMailBoxTable()">
                                <div class="message-overlay overlay-toMe overlay">
                                    <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-toMe')">
                                    <div id="Overlay-toMe" class="overlay-text">
                                        <p>Body with just explanation</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mail-options">
                        <p id= "date-right" class="tablet-hide">Date, Hour (2 days ago)</p>
                        <a onclick="return clickCaptureOverlayOn()" href="https://www.behavioralsurvey.com/replyto"><img src="./images/corner-up-left.svg"></a>
                        <a onclick="return clickCaptureOverlayOn()" href="https://www.behavioralsurvey.com/replyall"><img class="tablet-hide" src="./images/Reply All.svg"></a>
                        <a onclick="return clickCaptureOverlayOn()" href="https://www.behavioralsurvey.com/forward"><img class="tablet-hide" src="./images/Forward.svg"></a>
                        <img src="./images/more-vertical.svg" onclick="hideOverlays()">
                        <div id="overlay-hour-container" class="message-overlay tablet-hide overlay">
                            <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-hour')">
                            <div id="Overlay-hour" class="overlay-text">
                                <p>Body with just explanation</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                    <div id="mail-box-table" class="mail-box-table">
                        <div class="box-mail-row">
                            <p class="box-mail-column-left">From</p>
                            <p id="sender" class="box-mail-column-right">Name | senderemail@email.com </p>
                            <div class="message-overlay overlay-from overlay">
                                <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-1')">
                                <div id="Overlay-1" class="overlay-text">
                                    <p>Body with just explanation</p>
                                </div>
                            </div>
                        </div>
                        <div class="box-mail-row">
                            <p class="box-mail-column-left">Reply to</p>
                            <p id= "reply-to"class="box-mail-column-right">senderemail@email.com</p>
                            <div class="message-overlay overlay-reply-to overlay">
                                <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-2')">
                                <div id="Overlay-2" class="overlay-text">
                                    <p>Body with just explanation</p>
                                </div>
                            </div>
                        </div>
                        <div class="box-mail-row">
                            <p class="box-mail-column-left">To</p>
                            <p id= "to" class="box-mail-column-right">myemail@email.com</p>
                            <div class="message-overlay overlay-to overlay">
                                <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-3')">
                                <div id="Overlay-3" class="overlay-text">
                                    <p>Body with just explanation</p>
                                </div>
                            </div>
                        </div>
                        <div class="box-mail-row">
                            <p class="box-mail-column-left">Date</p>
                            <p id= "date"class="box-mail-column-right">Month, Day, Year, 00:00</p>
                            <div class="message-overlay overlay-date overlay">
                                <img class="overlay-image" src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-4')">
                                <div id="Overlay-4" class="overlay-text">
                                    <p>Body with just explanation</p>
                                </div>
                            </div>
                        </div>
                        <div class="box-mail-row">
                            <p class="box-mail-column-left">Mailed by</p>
                            <p id= "mailed-by"class="box-mail-column-right">mail3.ssa.gov</p>
                            <div class="message-overlay overlay-mailed-by overlay">
                                <img class="overlay-image " src="./images/alert-triangle (1).svg" onclick="displayOverlay('Overlay-5')">
                                <div id="Overlay-5" class="overlay-text">
                                    <p>Body with just explanation</p>
                                </div>
                            </div>
                        </div>
                        <div class="box-mail-row">
                            <div class="box-mail-column-left">
                                <img src="./images/lock.svg">
                            </div>
                            
                            <p class="box-mail-column-right">Standard Encryption</p>
                        </div>
                    </div>
                    

				<!-- End HTML for Email Header --> 
                
                <div class="mail-text">    
                        
						<!-- Here is where the core of the email goes. The rest is a wrapper to make it 
						look like the person is viewing an email client. -->
						
                </div>
                
                <!-- Click Capture Overlay  -->
				<div id="clickCaptureOverlay">
					<div id="overlaytext">Links have been disabled in this email for testing purposes. Please select "real" in the survey question below to move to the next question.  
					</div>
				</div>

            </div>
            
           
            </div>

           

            
    </div>
  </body>

  <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>
  
  <script src='./util/ssaTrust_common.js'></script>

  <!-- Here is where all of the template content goes.  
  You can include it as a separate Javascript file, or simply add it in a script tag.
  The two variables you need to define are:
  
	# Email content and header
	const jsonData = `{
		"Name" : "Jose Chavarria",
		"Reply_to": "replyto@gmail.com",
		"From": "sendermail1@gmail.com",
		"Mailed_by": "sendermail@email.com",
		"To": "myemail@email.com",
		"Month": "Mar",
		"Day": "04",
		"Year":"2021",
		"Hour": "12:00pm",
		"Subject": "The mail subject",
		"Email_body": ${email_body}   # This is most easily done as another variable with the core of the email.
				# Include overlays text within pairs of "@@"s. 
	}`;


	# Popup overlay messages
	const overlayMessages = `{
		"Subject" : "",
		"toMe": "",
		"Name_Sender": "",
		"Date": "",
		"Reply_to": "",
		"From": "",
		"Mailed_by": "",
		"To": ""
	}`;
  -->
  
  <script>
  var email_body = `
   <a onclick="return clickCaptureOverlayOn()" href="https://www.ssa.gov"><img class="body-image" src="./images/security-today.svg"></a>
<p class="text-greeting">Attention:</p>

<p class="text-paragraph">Due to the recent cyber attack on the Social Security Administrative database,
we advice that all United States SSN holders should update their information with the SSA for their safety and security.</p>

<p class="text-paragraph">We need your help to complete this security update by re-uploading your information online.</p>

<p class="text-paragraph"><a onclick="return clickCaptureOverlayOn()" href="https://www.ssa.security">CLICK HERE to proceed with your SSN Update</a>.@@Not A ".Gov" Domain@@</p>

<p class="text-paragraph">You will need to provide us with all the information we require.</p>

<div class="footer">
    <img src="./images/regards.svg">
    <div class="regards-text">
        <p>Regards</p>
        <p>Commisioner Andrew Saul</p>
        <p>Social Security Administration</p>
    </div>
</div>`;

email_body = JSON.stringify(email_body);

//THIS IS THE DATA TO BE INSERTED IN THE EMAIL TEMPLATE
const jsonData = `{
    "Name" : "NO-REPLY@ssa.gov",
    "Reply_to": "reply@ssa.security",
    "From": "reply@ssa.security",
    "Mailed_by": "flivver.dreamhost.com",
    "To": "youremail@gmail.com",
    "Month": "Mar",
    "Day": "04",
    "Year":"2021",
    "Hour": "4:23pm",
    "Subject": "Update on the Recent SSA Cyber Attack",
    "Email_body": ${email_body}
}`;


const overlayMessages = `{
    "Subject" : "",
    "toMe": "",
    "Name_Sender": "Sender Looks Real",
    "Date": "",
    "Reply_to": "But the Reply-To Address Isn't",
    "From": "",
    "Mailed_by": "",
    "To": ""
}`;
  </script>
  
  
    <script type='text/javascript'>
        $(document).ready(function(){
                
                //ADDING THE PARAMETRIZED TEXT
                var data = JSON.parse(jsonData);

                document.getElementById("subject").innerText = data.Subject;
                
				if (data.Name.length > 0) {
					document.getElementById("name").innerText = data.Name;
				} else {
					document.getElementById("name").innerHTML =  " ".concat("&#60;", data.From, "&#62;");
				}

                document.getElementById("sender-top").innerHTML = " " // .concat("&#60;", data.From, "&#62;");;
                document.getElementById("date-left").innerHTML = data.Month.concat(" ", data.Day, ", ", data.Year,", ", data.Hour, " " );

                document.getElementById("date-right").innerHTML = data.Month.concat(" ", data.Day, ", ", data.Year,", ", data.Hour, " " );

				if (data.Name.length > 0) {
					document.getElementById("sender").innerHTML = data.Name.concat(" | ", data.From);
				} else {
					document.getElementById("sender").innerHTML = data.From;
				}
                document.getElementById("reply-to").innerHTML = data.Reply_to;
                document.getElementById("to").innerHTML = data.To;
                document.getElementById("date").innerHTML = data.Month.concat(" ", data.Day, ", ", data.Year,", ", data.Hour);
                document.getElementById("mailed-by").innerHTML = data.Mailed_by;
                console.log(addOverlaysToBody(data.Email_body));
                document.querySelector(".mail-text").innerHTML = addOverlaysToBody(data.Email_body);
                

                //ADDING THE SET OVERLAY MESSAGES
				const queryString = window.location.search;
				const urlParams = new URLSearchParams(queryString);
                // var params = window.location.search.substring(1);
				var displayTheOverlays = false;
				if (urlParams.has('showOverlays')) {
					var theParam = urlParams.get('showOverlays');
					if (theParam == 'true') {
						displayTheOverlays = true;
					}
				}
               
                if(displayTheOverlays){
                    document.querySelector(".toMe-arrow").classList.toggle("rotated");
                    document.querySelector(".mail-box-table").classList.toggle("expanded");
                    var overlays = document.querySelectorAll(".overlay");
                    overlays.forEach((overlay)=>{
                        overlay.style.display = "flex";
                    });
                }

                var overlay_Messages = JSON.parse(overlayMessages);
                if(overlay_Messages.Subject == "" || overlay_Messages.Subject == null){
                    document.querySelector(".overlay-subject").style.display = "none";
                }
                if(overlay_Messages.Date == "" || overlay_Messages.Date == null){
                    document.querySelector(".overlay-date").style.display = "none";
                    document.getElementById("overlay-hour-container").style.display = "none";
                }
                if(overlay_Messages.Name_Sender == "" || overlay_Messages.Name_Sender == null){
                    document.querySelector(".overlay-name").style.display = "none";
                }
                if(overlay_Messages.toMe == "" || overlay_Messages.toMe == null){
                    document.querySelector(".overlay-toMe").style.display = "none";
                }
                if(overlay_Messages.From == "" || overlay_Messages.From == null){
                    document.querySelector(".overlay-from").style.display = "none";
                }
                if(overlay_Messages.Reply_to == "" || overlay_Messages.Reply_to == null){
                    document.querySelector(".overlay-reply-to").style.display = "none";
                }
                if(overlay_Messages.To == "" || overlay_Messages.To == null){
                    document.querySelector(".overlay-to").style.display = "none";
                }
                if(overlay_Messages.Mailed_by == "" || overlay_Messages.Mailed_by == null){
                    document.querySelector(".overlay-mailed-by").style.display = "none";
                }

                document.querySelector("#Overlay-subject>p").innerHTML = overlay_Messages.Subject;
                document.querySelector("#Overlay-hour>p").innerHTML = overlay_Messages.Date;
                document.querySelector("#Overlay-name>p").innerHTML = overlay_Messages.Name_Sender;
                document.querySelector("#Overlay-toMe>p").innerHTML = overlay_Messages.toMe;
                document.querySelector("#Overlay-1>p").innerHTML = overlay_Messages.From;
                document.querySelector("#Overlay-2>p").innerHTML = overlay_Messages.Reply_to;
                document.querySelector("#Overlay-3>p").innerHTML = overlay_Messages.To;
                document.querySelector("#Overlay-4>p").innerHTML = overlay_Messages.Date;
                document.querySelector("#Overlay-5>p").innerHTML = overlay_Messages.Mailed_by;
                
                //THIS HIDES OR SHOWS ALL THE OVERLAYS
                //To hide include in the html url '?showOverlays=true'
                
                if (screen.width < 620) {
                    document.querySelectorAll(`.overlay-text`).forEach((element) => element.classList.toggle("collapsed-horizontal"));
                    document.querySelectorAll(`.overlay-text`).forEach((element) => element.classList.toggle("no-shadow"));
                }

				// Fill in the name, if there is a space for it & we have a name to put in
				const nameElement = document.getElementById('nametofill')
				if (nameElement && urlParams.has('name')) {
					var theNewName = urlParams.get('name');
					if (theNewName && theNewName.length > 1) {
						nameElement.textContent = theNewName;
					}
				}

        });
        
        function displayMailBoxTable(){
            
            document.querySelector(".toMe-arrow").classList.toggle("rotated");

            document.querySelector(".mail-box-table").classList.toggle("expanded");

        }

        
        
    </script>
</html>
